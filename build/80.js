webpackJsonp([80],{2091:function(n,t,i){"use strict";function View_AddonNotificationsActionsComponent_2(n){return l._58(0,[(n()(),l._32(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),l._31(1,16384,null,0,yn.a,[],null,null),(n()(),l._56(-1,null,["\n        "])),(n()(),l._32(3,0,null,null,6,"button",[["block",""],["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,t,i){var l=!0;if("click"===t){l=!1!==n.context.$implicit.action(void 0,n.component.navCtrl)&&l}return l},T.b,T.a)),l._31(4,1097728,null,0,S.a,[[8,""],G.a,l.t,l.W],{small:[0,"small"],clear:[1,"clear"],block:[2,"block"]},null),(n()(),l._56(-1,0,["\n            "])),(n()(),l._32(6,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),l._31(7,147456,null,0,Ln.a,[G.a,l.t,l.W],{name:[0,"name"]},null),(n()(),l._56(8,0,["\n            ","\n        "])),l._48(131072,q.a,[z.a,l.j]),(n()(),l._56(-1,null,["\n    "]))],function(n,t){n(t,4,0,"","","");n(t,7,0,l._35(1,"",t.context.$implicit.icon,""))},function(n,t){n(t,6,0,l._45(t,7)._hidden);n(t,8,0,l._57(t,8,0,l._45(t,9).transform(t.context.$implicit.message)))})}function View_AddonNotificationsActionsComponent_1(n){return l._58(0,[(n()(),l._32(0,0,null,null,5,"ion-row",[["class","row"],["justify-content-around",""]],null,null,null,null,null)),l._31(1,16384,null,0,xn.a,[],null,null),(n()(),l._56(-1,null,["\n    "])),(n()(),l._27(16777216,null,null,1,null,View_AddonNotificationsActionsComponent_2)),l._31(4,802816,null,0,s.j,[l._12,l._7,l.E],{ngForOf:[0,"ngForOf"]},null),(n()(),l._56(-1,null,["\n"]))],function(n,t){n(t,4,0,t.component.actions)},null)}function View_AddonNotificationsActionsComponent_0(n){return l._58(0,[(n()(),l._27(16777216,null,null,1,null,View_AddonNotificationsActionsComponent_1)),l._31(1,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,null,["\n"]))],function(n,t){var i=t.component;n(t,1,0,i.actions&&i.actions.length>0)},null)}function View_AddonNotificationsListPage_2(n){return l._58(0,[(n()(),l._32(0,0,null,null,6,"button",[["block",""],["color","light"],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(n,t,i){var l=!0;if("click"===t){l=!1!==n.component.markAllNotificationsAsRead()&&l}return l},T.b,T.a)),l._31(1,1097728,null,0,S.a,[[8,""],G.a,l.t,l.W],{color:[0,"color"],block:[1,"block"]},null),(n()(),l._56(-1,0,["\n                "])),(n()(),l._32(3,0,null,0,1,"core-icon",[["name","fa-check"]],null,null,null,J.b,J.a)),l._31(4,704512,null,0,B.a,[l.t,G.a],{name:[0,"name"]},null),(n()(),l._56(5,0,["\n                ","\n            "])),l._48(131072,q.a,[z.a,l.j])],function(n,t){n(t,1,0,"light","");n(t,4,0,"fa-check")},function(n,t){n(t,5,0,l._57(t,5,0,l._45(t,6).transform("addon.notifications.markallread")))})}function View_AddonNotificationsListPage_3(n){return l._58(0,[(n()(),l._32(0,0,null,null,5,"button",[["block",""],["color","light"],["icon-start",""],["ion-button",""]],null,null,null,T.b,T.a)),l._31(1,1097728,null,0,S.a,[[8,""],G.a,l.t,l.W],{color:[0,"color"],block:[1,"block"]},null),(n()(),l._56(-1,0,["\n                "])),(n()(),l._32(3,0,null,0,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,K.b,K.a)),l._31(4,114688,null,0,Q.a,[G.a,l.t,l.W],null,null),(n()(),l._56(-1,0,["\n            "]))],function(n,t){n(t,1,0,"light",""),n(t,4,0)},function(n,t){n(t,3,0,l._45(t,4)._paused)})}function View_AddonNotificationsListPage_1(n){return l._58(0,[(n()(),l._32(0,0,null,null,7,"div",[["padding",""]],null,null,null,null,null)),(n()(),l._56(-1,null,["\n            "])),(n()(),l._27(16777216,null,null,1,null,View_AddonNotificationsListPage_2)),l._31(3,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,null,["\n            "])),(n()(),l._27(16777216,null,null,1,null,View_AddonNotificationsListPage_3)),l._31(6,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,null,["\n        "]))],function(n,t){var i=t.component;n(t,3,0,!i.loadingMarkAllNotificationsAsRead);n(t,6,0,i.loadingMarkAllNotificationsAsRead)},null)}function View_AddonNotificationsListPage_5(n){return l._58(0,[(n()(),l._32(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,X.b,X.a)),l._31(1,770048,null,0,Y.a,[Z.a,f.b,N.b,nn.b,A.b,[2,tn.a]],{user:[0,"user"],profileUrl:[1,"profileUrl"],fullname:[2,"fullname"],userId:[3,"userId"],extraIcon:[4,"extraIcon"]},null),l._31(2,16384,null,0,ln.a,[],null,null)],function(n,t){n(t,1,0,t.parent.context.$implicit,t.parent.context.$implicit.profileimageurlfrom,t.parent.context.$implicit.userfromfullname,t.parent.context.$implicit.useridfrom,t.parent.context.$implicit.iconurl)},null)}function View_AddonNotificationsListPage_6(n){return l._58(0,[(n()(),l._32(0,0,null,null,0,"img",[["alt",""],["class","core-notification-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(n,t){n(t,0,0,t.parent.context.$implicit.iconurl)})}function View_AddonNotificationsListPage_7(n){return l._58(0,[(n()(),l._32(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),l._32(1,0,null,null,1,"core-icon",[["color","primary"],["name","fa-circle"]],null,null,null,J.b,J.a)),l._31(2,704512,null,0,B.a,[l.t,G.a],{name:[0,"name"],color:[1,"color"]},null)],function(n,t){n(t,2,0,"fa-circle","primary")},null)}function View_AddonNotificationsListPage_8(n){return l._58(0,[(n()(),l._32(0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l._56(1,null,["",""]))],null,function(n,t){n(t,1,0,t.parent.context.$implicit.userfromfullname)})}function View_AddonNotificationsListPage_4(n){return l._58(0,[(n()(),l._32(0,0,null,null,48,"ion-card",[],null,null,null,null,null)),l._31(1,16384,null,0,on.a,[G.a,l.t,l.W],null,null),(n()(),l._56(-1,null,["\n            "])),(n()(),l._32(3,0,null,null,28,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,en.b,en.a)),l._31(4,1097728,null,3,an.a,[un.a,G.a,l.t,l.W,[2,cn.a]],null,null),l._53(335544320,1,{contentLabel:0}),l._53(603979776,2,{_buttons:1}),l._53(603979776,3,{_icons:1}),l._31(8,16384,null,0,sn.a,[],null,null),(n()(),l._56(-1,2,["\n                "])),(n()(),l._27(16777216,null,0,1,null,View_AddonNotificationsListPage_5)),l._31(11,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,2,["\n                "])),(n()(),l._27(16777216,null,0,1,null,View_AddonNotificationsListPage_6)),l._31(14,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,2,["\n                "])),(n()(),l._32(16,0,null,2,1,"h2",[],null,null,null,null,null)),(n()(),l._56(17,null,["",""])),(n()(),l._56(-1,2,["\n                "])),(n()(),l._32(19,0,null,2,8,"p",[],null,null,null,null,null)),(n()(),l._32(20,0,null,null,6,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),l._31(21,16384,null,0,rn.a,[G.a,l.t,l.W],null,null),(n()(),l._56(22,null,["\n                        ","\n                        "])),l._50(23,1),(n()(),l._27(16777216,null,null,1,null,View_AddonNotificationsListPage_7)),l._31(25,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,null,["\n                    "])),(n()(),l._56(-1,null,["\n                "])),(n()(),l._56(-1,2,["\n                "])),(n()(),l._27(16777216,null,2,1,null,View_AddonNotificationsListPage_8)),l._31(30,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,2,["\n            "])),(n()(),l._56(-1,null,["\n            "])),(n()(),l._32(33,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,en.b,en.a)),l._31(34,1097728,null,3,an.a,[un.a,G.a,l.t,l.W,[2,cn.a]],null,null),l._53(335544320,4,{contentLabel:0}),l._53(603979776,5,{_buttons:1}),l._53(603979776,6,{_icons:1}),l._31(38,16384,null,0,sn.a,[],null,null),(n()(),l._56(-1,2,["\n                "])),(n()(),l._32(40,0,null,2,3,"p",[],null,null,null,null,null)),(n()(),l._32(41,16777216,null,null,2,"core-format-text",[["contextLevel","system"]],null,null,null,null,null)),l._31(42,540672,null,0,fn.a,[l.t,f.b,g.b,b.b,z.a,dn.a,N.b,_n.b,pn.b,hn.b,mn.b,[2,Z.a],[2,gn.a],[2,tn.a],bn.a,A.b,An.a,Nn.a,vn.a,l._12,Pn.b],{text:[0,"text"],maxHeight:[1,"maxHeight"],contextLevel:[2,"contextLevel"],contextInstanceId:[3,"contextInstanceId"]},null),l._50(43,1),(n()(),l._56(-1,2,["\n            "])),(n()(),l._56(-1,null,["\n            "])),(n()(),l._32(46,0,null,null,1,"addon-notifications-actions",[],null,null,null,View_AddonNotificationsActionsComponent_0,wn)),l._31(47,114688,null,0,p,[r.a,f.b,Z.a],{contextUrl:[0,"contextUrl"],courseId:[1,"courseId"],data:[2,"data"]},null),(n()(),l._56(-1,null,["\n        "]))],function(n,t){n(t,11,0,t.context.$implicit.useridfrom>0);n(t,14,0,t.context.$implicit.useridfrom<=0&&t.context.$implicit.iconurl);n(t,25,0,!t.context.$implicit.timeread);n(t,30,0,t.context.$implicit.userfromfullname);n(t,42,0,l._57(t,42,0,n(t,43,0,l._45(t.parent,1),t.context.$implicit.mobiletext)),t.context.$implicit.displayfullhtml?120:null,"system",0);n(t,47,0,t.context.$implicit.contexturl,t.context.$implicit.courseid,t.context.$implicit.customdata)},function(n,t){n(t,17,0,t.context.$implicit.subject);n(t,22,0,l._57(t,22,0,n(t,23,0,l._45(t.parent,0),t.context.$implicit.timecreated)))})}function View_AddonNotificationsListPage_9(n){return l._58(0,[(n()(),l._32(0,0,null,null,2,"core-empty-box",[["icon","notifications"]],null,null,null,kn.b,kn.a)),l._31(1,49152,null,0,Rn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),l._48(131072,q.a,[z.a,l.j])],function(n,t){n(t,1,0,l._57(t,1,0,l._45(t,2).transform("addon.notifications.therearentnotificationsyet")),"notifications")},null)}function View_AddonNotificationsListPage_0(n){return l._58(0,[l._48(0,Vn.a,[pn.b,z.a,Cn.b]),l._48(0,In.a,[]),(n()(),l._32(2,0,null,null,12,"ion-header",[],null,null,null,null,null)),l._31(3,16384,null,0,On.a,[G.a,l.t,l.W,[2,jn.a]],null,null),(n()(),l._56(-1,null,["\n    "])),(n()(),l._32(5,0,null,null,8,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Mn.b,Mn.a)),l._31(6,49152,null,0,Dn.a,[$n.a,[2,jn.a],[2,Z.a],G.a,l.t,l.W],null,null),l._31(7,212992,null,0,En.a,[Dn.a,z.a,A.b],null,null),(n()(),l._56(-1,3,["\n        "])),(n()(),l._32(9,0,null,3,3,"ion-title",[],null,null,null,Un.b,Un.a)),l._31(10,49152,null,0,Wn.a,[G.a,l.t,l.W,[2,Hn.a],[2,Dn.a]],null,null),(n()(),l._56(11,0,["",""])),l._48(131072,q.a,[z.a,l.j]),(n()(),l._56(-1,3,["\n    "])),(n()(),l._56(-1,null,["\n"])),(n()(),l._56(-1,null,["\n"])),(n()(),l._32(16,0,null,null,26,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Fn.b,Fn.a)),l._31(17,4374528,null,0,gn.a,[G.a,dn.a,Tn.a,l.t,l.W,$n.a,Sn.a,l.N,[2,jn.a],[2,Z.a]],null,null),(n()(),l._56(-1,1,["\n    "])),(n()(),l._32(19,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,t,i){var l=!0;if("ionRefresh"===t){l=!1!==n.component.refreshNotifications(i)&&l}return l},null,null)),l._31(20,212992,null,0,Gn.a,[dn.a,gn.a,l.N,Jn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),l._56(-1,null,["\n        "])),(n()(),l._32(22,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Bn.b,Bn.a)),l._31(23,114688,null,0,qn.a,[Gn.a,G.a],{pullingText:[0,"pullingText"]},null),l._48(131072,q.a,[z.a,l.j]),(n()(),l._56(-1,null,["\n    "])),(n()(),l._56(-1,1,["\n    "])),(n()(),l._32(27,0,null,1,14,"core-loading",[],null,null,null,zn.b,zn.a)),l._31(28,638976,null,0,Kn.a,[z.a,l.t,A.b,N.b],{hideUntil:[0,"hideUntil"]},null),(n()(),l._56(-1,0,["\n        "])),(n()(),l._27(16777216,null,0,1,null,View_AddonNotificationsListPage_1)),l._31(31,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,0,["\n        "])),(n()(),l._27(16777216,null,0,1,null,View_AddonNotificationsListPage_4)),l._31(34,802816,null,0,s.j,[l._12,l._7,l.E],{ngForOf:[0,"ngForOf"]},null),(n()(),l._56(-1,0,["\n        "])),(n()(),l._27(16777216,null,0,1,null,View_AddonNotificationsListPage_9)),l._31(37,16384,null,0,s.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,0,["\n        "])),(n()(),l._32(39,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(n,t,i){var l=!0;if("action"===t){l=!1!==n.component.loadMoreNotifications(i)&&l}return l},Qn.b,Qn.a)),l._31(40,573440,null,0,Xn.a,[[2,gn.a],g.b],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(n()(),l._56(-1,0,["\n    "])),(n()(),l._56(-1,1,["\n"])),(n()(),l._56(-1,null,["\n"]))],function(n,t){var i=t.component;n(t,7,0);n(t,20,0,i.notificationsLoaded);n(t,23,0,l._35(1,"",l._57(t,23,0,l._45(t,24).transform("core.pulltorefresh")),""));n(t,28,0,i.notificationsLoaded);n(t,31,0,i.canMarkAllNotificationsAsRead);n(t,34,0,i.notifications);n(t,37,0,!i.notifications||i.notifications.length<=0);n(t,40,0,i.canLoadMore,i.loadMoreError)},function(n,t){n(t,5,0,l._45(t,6)._hidden,l._45(t,6)._sbPadding);n(t,11,0,l._57(t,11,0,l._45(t,12).transform("addon.notifications.notifications")));n(t,16,0,l._45(t,17).statusbarPadding,l._45(t,17)._hasRefresher);n(t,19,0,"inactive"!==l._45(t,20).state,l._45(t,20)._top);n(t,22,0,l._45(t,23).r.state)})}Object.defineProperty(t,"__esModule",{value:!0});var l=i(0),o=i(5),e=i(3),a=i(26),u=i(32),c=i(111),s=i(7),r=i(66),f=i(1),d=this&&this.__decorate||function(n,t,i,l){var o,e=arguments.length,a=e<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,i,l);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(a=(e<3?o(a):e>3?o(t,i,a):o(t,i))||a);return e>3&&a&&Object.defineProperty(t,i,a),a},_=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},p=function(){function AddonNotificationsActionsComponent(n,t,i){this.contentLinksDelegate=n,this.sitesProvider=t,this.navCtrl=i,this.actions=[]}return AddonNotificationsActionsComponent.prototype.ngOnInit=function(){var n=this;if(this.contextUrl||this.data&&this.data.appurl){(this.data&&this.data.appurl?this.contentLinksDelegate.getActionsFor(this.data.appurl,this.courseId,void 0,this.data):Promise.resolve([])).then(function(t){return!t.length&&n.contextUrl?n.contentLinksDelegate.getActionsFor(n.contextUrl,n.courseId,void 0,n.data):t}).then(function(t){t.length||t.push({message:"core.view",icon:"eye",action:n.defaultAction.bind(n)}),n.actions=t})}},AddonNotificationsActionsComponent.prototype.defaultAction=function(n,t){var i=this.data&&this.data.appurl||this.contextUrl;this.sitesProvider.getCurrentSite().openInBrowserWithAutoLogin(i)},d([Object(l.D)(),_("design:type",String)],AddonNotificationsActionsComponent.prototype,"contextUrl",void 0),d([Object(l.D)(),_("design:type",Number)],AddonNotificationsActionsComponent.prototype,"courseId",void 0),d([Object(l.D)(),_("design:type",Object)],AddonNotificationsActionsComponent.prototype,"data",void 0),AddonNotificationsActionsComponent=d([Object(l.m)({selector:"addon-notifications-actions",templateUrl:"addon-notifications-actions.html"}),_("design:paramtypes",[r.a,f.b,o.s])],AddonNotificationsActionsComponent)}(),h=this&&this.__decorate||function(n,t,i,l){var o,e=arguments.length,a=e<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,i,l);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(a=(e<3?o(a):e>3?o(t,i,a):o(t,i))||a);return e>3&&a&&Object.defineProperty(t,i,a),a},m=function(){function AddonNotificationsComponentsModule(){}return AddonNotificationsComponentsModule=h([Object(l.J)({declarations:[p],imports:[s.b,o.k,e.b.forChild()],providers:[],exports:[p]})],AddonNotificationsComponentsModule)}(),g=i(4),b=i(10),A=i(9),N=i(2),v=i(261),P=i(530),y=i(146),L=this&&this.__decorate||function(n,t,i,l){var o,e=arguments.length,a=e<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,i,l);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(a=(e<3?o(a):e>3?o(t,i,a):o(t,i))||a);return e>3&&a&&Object.defineProperty(t,i,a),a},x=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},w=function(){function AddonNotificationsListPage(n,t,i,l,o,e,a,u,c){this.domUtils=t,this.eventsProvider=i,this.sitesProvider=l,this.textUtils=o,this.utils=e,this.notificationsProvider=a,this.pushNotificationsDelegate=u,this.notificationsHelper=c,this.notifications=[],this.notificationsLoaded=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.canMarkAllNotificationsAsRead=!1,this.loadingMarkAllNotificationsAsRead=!1,this.pendingRefresh=!1}return AddonNotificationsListPage.prototype.ionViewDidLoad=function(){var n=this;this.fetchNotifications(),this.cronObserver=this.eventsProvider.on(v.a.READ_CRON_EVENT,function(){n.isCurrentView&&(n.notificationsLoaded=!1,n.refreshNotifications())},this.sitesProvider.getCurrentSiteId()),this.pushObserver=this.pushNotificationsDelegate.on("receive").subscribe(function(t){n.isCurrentView&&n.utils.isTrueOrOne(t.notif)&&n.sitesProvider.isCurrentSite(t.site)?(n.notificationsLoaded=!1,n.refreshNotifications()):n.isCurrentView||(n.pendingRefresh=!0)})},AddonNotificationsListPage.prototype.fetchNotifications=function(n){var t=this;return this.loadMoreError=!1,this.notificationsHelper.getNotifications(n?[]:this.notifications).then(function(i){i.notifications.forEach(t.formatText.bind(t)),t.notifications=n?i.notifications:t.notifications.concat(i.notifications),t.canLoadMore=i.canLoadMore,t.markNotificationsAsRead(i.notifications)}).catch(function(n){t.domUtils.showErrorModalDefault(n,"addon.notifications.errorgetnotifications",!0),t.loadMoreError=!0}).finally(function(){t.notificationsLoaded=!0})},AddonNotificationsListPage.prototype.markAllNotificationsAsRead=function(){var n=this;this.loadingMarkAllNotificationsAsRead=!0,this.notificationsProvider.markAllNotificationsAsRead().catch(function(){}).then(function(){var t=n.sitesProvider.getCurrentSiteId();return n.eventsProvider.trigger(v.a.READ_CHANGED_EVENT,null,t),n.notificationsLoaded=!1,n.refreshNotifications()})},AddonNotificationsListPage.prototype.markNotificationsAsRead=function(n){var t,i=this;if(n.length>0){var l=n.map(function(n){return n.read?Promise.resolve():i.notificationsProvider.markNotificationRead(n.id)});t=Promise.all(l).catch(function(){}).finally(function(){i.notificationsProvider.invalidateNotificationsList().finally(function(){var n=i.sitesProvider.getCurrentSiteId();i.eventsProvider.trigger(v.a.READ_CHANGED_EVENT,null,n)})})}else t=Promise.resolve();t.finally(function(){if(i.notificationsProvider.isMarkAllNotificationsAsReadEnabled())return i.loadingMarkAllNotificationsAsRead=!0,i.notificationsProvider.getUnreadNotificationsCount().then(function(n){i.canMarkAllNotificationsAsRead=n>0}).finally(function(){i.loadingMarkAllNotificationsAsRead=!1});i.canMarkAllNotificationsAsRead=!1})},AddonNotificationsListPage.prototype.refreshNotifications=function(n){var t=this;return this.notificationsProvider.invalidateNotificationsList().finally(function(){return t.fetchNotifications(!0).finally(function(){n&&n.complete()})})},AddonNotificationsListPage.prototype.loadMoreNotifications=function(n){this.fetchNotifications().finally(function(){n&&n()})},AddonNotificationsListPage.prototype.formatText=function(n){n.displayfullhtml=this.shouldDisplayFullHtml(n),n.mobiletext=n.displayfullhtml?n.fullmessagehtml:this.textUtils.replaceNewLines(n.mobiletext.replace(/-{4,}/gi,""),"<br>")},AddonNotificationsListPage.prototype.shouldDisplayFullHtml=function(n){return"mod_forum"==n.component&&"digests"==n.eventtype},AddonNotificationsListPage.prototype.ionViewDidEnter=function(){this.isCurrentView=!0,this.pendingRefresh&&(this.pendingRefresh=!1,this.notificationsLoaded=!1,this.refreshNotifications())},AddonNotificationsListPage.prototype.ionViewDidLeave=function(){this.isCurrentView=!1},AddonNotificationsListPage.prototype.ngOnDestroy=function(){this.cronObserver&&this.cronObserver.off(),this.pushObserver&&this.pushObserver.unsubscribe()},AddonNotificationsListPage=L([Object(l.m)({selector:"page-addon-notifications-list",templateUrl:"list.html"}),x("design:paramtypes",[o.t,g.b,A.b,f.b,b.b,N.b,v.a,y.a,P.a])],AddonNotificationsListPage)}(),k=this&&this.__decorate||function(n,t,i,l){var o,e=arguments.length,a=e<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,i,l);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(a=(e<3?o(a):e>3?o(t,i,a):o(t,i))||a);return e>3&&a&&Object.defineProperty(t,i,a),a},R=function(){function AddonNotificationsListPageModule(){}return AddonNotificationsListPageModule=k([Object(l.J)({declarations:[w],imports:[a.a,u.a,c.a,o.l.forChild(w),e.b.forChild(),m]})],AddonNotificationsListPageModule)}(),V=i(1551),C=i(1552),I=i(1553),O=i(1554),j=i(1555),M=i(1556),D=i(1557),$=i(1558),E=i(1559),U=i(1560),W=i(1561),H=i(1562),F=i(1563),T=i(47),S=i(44),G=i(8),J=i(85),B=i(78),q=i(25),z=i(18),K=i(125),Q=i(104),X=i(218),Y=i(186),Z=i(20),nn=i(12),tn=i(29),ln=i(164),on=i(79),en=i(31),an=i(22),un=i(21),cn=i(27),sn=i(33),rn=i(253),fn=i(49),dn=i(16),_n=i(19),pn=i(6),hn=i(17),mn=i(14),gn=i(28),bn=i(42),An=i(43),Nn=i(30),vn=i(36),Pn=i(40),yn=i(119),Ln=i(48),xn=i(120),wn=l._30({encapsulation:2,styles:[],data:{}}),kn=(l._28("addon-notifications-actions",p,function View_AddonNotificationsActionsComponent_Host_0(n){return l._58(0,[(n()(),l._32(0,0,null,null,1,"addon-notifications-actions",[],null,null,null,View_AddonNotificationsActionsComponent_0,wn)),l._31(1,114688,null,0,p,[r.a,f.b,Z.a],null,null)],function(n,t){n(t,1,0)},null)},{contextUrl:"contextUrl",courseId:"courseId",data:"data"},{},[]),i(126)),Rn=i(118),Vn=i(386),Cn=i(24),In=i(1647),On=i(379),jn=i(41),Mn=i(739),Dn=i(216),$n=i(35),En=i(486),Un=i(740),Wn=i(324),Hn=i(252),Fn=i(185),Tn=i(34),Sn=i(112),Gn=i(163),Jn=i(45),Bn=i(217),qn=i(178),zn=i(57),Kn=i(54),Qn=i(381),Xn=i(281),Yn=i(73),Zn=l._30({encapsulation:2,styles:[],data:{}}),nt=l._28("page-addon-notifications-list",w,function View_AddonNotificationsListPage_Host_0(n){return l._58(0,[(n()(),l._32(0,0,null,null,1,"page-addon-notifications-list",[],null,null,null,View_AddonNotificationsListPage_0,Zn)),l._31(1,180224,null,0,w,[Yn.a,g.b,A.b,f.b,b.b,N.b,v.a,y.a,P.a],null,null)],null,null)},{},{},[]),tt=i(23),it=i(375),lt=i(376),ot=i(378),et=i(377),at=i(485),ut=i(738),ct=i(277);i.d(t,"AddonNotificationsListPageModuleNgFactory",function(){return st});var st=l._29(R,[],function(n){return l._41([l._42(512,l.o,l._22,[[8,[V.a,C.a,I.a,O.a,j.a,M.a,D.a,$.a,E.a,U.a,W.a,H.a,F.a,nt]],[3,l.o],l.L]),l._42(4608,s.m,s.l,[l.G,[2,s.w]]),l._42(4608,tt.x,tt.x,[]),l._42(4608,tt.d,tt.d,[]),l._42(4608,it.b,it.a,[]),l._42(4608,lt.a,lt.b,[]),l._42(4608,ot.b,ot.a,[]),l._42(4608,et.b,et.a,[]),l._42(4608,z.a,z.a,[at.a,it.b,lt.a,ot.b,et.b,z.b,z.c]),l._42(512,s.b,s.b,[]),l._42(512,tt.v,tt.v,[]),l._42(512,tt.i,tt.i,[]),l._42(512,tt.s,tt.s,[]),l._42(512,ut.a,ut.a,[]),l._42(512,e.b,e.b,[]),l._42(512,u.a,u.a,[]),l._42(512,c.a,c.a,[]),l._42(512,a.a,a.a,[]),l._42(512,ut.b,ut.b,[]),l._42(512,m,m,[]),l._42(512,R,R,[]),l._42(256,z.c,void 0,[]),l._42(256,z.b,void 0,[]),l._42(256,ct.a,w,[])])})}});
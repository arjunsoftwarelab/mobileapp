webpackJsonp([144],{2011:function(n,e,t){"use strict";function View_AddonCalendarListPage_1(n){return l._58(0,[(n()(),l._32(0,0,null,null,1,"ion-icon",[["name","funnel"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l._31(1,147456,null,0,G.a,[z.a,l.t,l.W],{name:[0,"name"]},null)],function(n,e){n(e,1,0,"funnel")},function(n,e){n(e,0,0,l._45(e,1)._hidden)})}function View_AddonCalendarListPage_2(n){return l._58(0,[(n()(),l._32(0,0,null,null,1,"ion-icon",[["name","ios-funnel-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l._31(1,147456,null,0,G.a,[z.a,l.t,l.W],{name:[0,"name"]},null)],function(n,e){n(e,1,0,"ios-funnel-outline")},function(n,e){n(e,0,0,l._45(e,1)._hidden)})}function View_AddonCalendarListPage_3(n){return l._58(0,[(n()(),l._32(0,0,null,null,8,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),l._31(1,16384,null,0,J.a,[z.a,l.t,l.W],null,null),(n()(),l._56(-1,null,["\n                "])),(n()(),l._32(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l._31(4,147456,null,0,G.a,[z.a,l.t,l.W],{name:[0,"name"]},null),(n()(),l._56(5,null,[" ","\n            "])),l._48(131072,B.a,[X.a,l.j]),l._49(7,{$a:0}),l._48(131072,B.a,[X.a,l.j])],function(n,e){n(e,4,0,"warning")},function(n,e){n(e,3,0,l._45(e,4)._hidden);n(e,5,0,l._57(e,5,0,l._45(e,8).transform("core.hasdatatosync",n(e,7,0,l._57(e,5,0,l._45(e,6).transform("addon.calendar.calendar"))))))})}function View_AddonCalendarListPage_4(n){return l._58(0,[(n()(),l._32(0,0,null,null,3,"core-empty-box",[["icon","calendar"]],null,null,null,q.b,q.a)),l._31(1,49152,null,0,K.a,[],{message:[0,"message"],icon:[1,"icon"]},null),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,0,["\n            "]))],function(n,e){n(e,1,0,l._57(e,1,0,l._45(e,2).transform("addon.calendar.noevents")),"calendar")},null)}function View_AddonCalendarListPage_7(n){return l._58(0,[(n()(),l._32(0,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,Q.b,Q.a)),l._31(1,1097728,null,3,Z.a,[nn.a,z.a,l.t,l.W,[2,en.a]],null,null),l._53(335544320,4,{contentLabel:0}),l._53(603979776,5,{_buttons:1}),l._53(603979776,6,{_icons:1}),l._31(5,16384,null,0,tn.a,[z.a,l.t,l.W],null,null),(n()(),l._56(6,2,["\n                        ","\n                    "])),l._50(7,2)],null,function(n,e){n(e,6,0,l._57(e,6,0,n(e,7,0,l._45(e.parent.parent.parent,0),1e3*e.parent.context.$implicit.timestart,"strftimedayshort")))})}function View_AddonCalendarListPage_8(n){return l._58(0,[(n()(),l._32(0,0,null,null,0,"img",[["class","core-module-icon"],["item-start",""]],[[8,"src",4]],null,null,null,null))],null,function(n,e){n(e,0,0,l._35(1,"",e.parent.context.$implicit.moduleIcon,""))})}function View_AddonCalendarListPage_9(n){return l._58(0,[(n()(),l._32(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,ln.b,ln.a)),l._31(1,704512,null,0,an.a,[l.t,z.a],{name:[0,"name"]},null)],function(n,e){n(e,1,0,e.parent.context.$implicit.eventIcon)},null)}function View_AddonCalendarListPage_10(n){return l._58(0,[(n()(),l._32(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),l._56(1,null,[" - ",""])),l._50(2,2)],null,function(n,e){n(e,1,0,l._57(e,1,0,n(e,2,0,l._45(e.parent.parent.parent,0),1e3*(e.parent.context.$implicit.timestart+e.parent.context.$implicit.timeduration),"strftimetime")))})}function View_AddonCalendarListPage_11(n){return l._58(0,[(n()(),l._32(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),l._56(1,null,[" - ",""])),l._50(2,2)],null,function(n,e){n(e,1,0,l._57(e,1,0,n(e,2,0,l._45(e.parent.parent.parent,0),1e3*(e.parent.context.$implicit.timestart+e.parent.context.$implicit.timeduration),"strftimedatetimeshort")))})}function View_AddonCalendarListPage_12(n){return l._58(0,[(n()(),l._32(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),l._31(1,16384,null,0,rn.a,[z.a,l.t,l.W],null,null),(n()(),l._56(-1,null,["\n                            "])),(n()(),l._32(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l._31(4,147456,null,0,G.a,[z.a,l.t,l.W],{name:[0,"name"]},null),(n()(),l._56(-1,null,["\n                            "])),(n()(),l._32(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),l._56(7,null,["",""])),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,null,["\n                        "]))],function(n,e){n(e,4,0,"time")},function(n,e){n(e,3,0,l._45(e,4)._hidden);n(e,7,0,l._57(e,7,0,l._45(e,8).transform("core.notsent")))})}function View_AddonCalendarListPage_13(n){return l._58(0,[(n()(),l._32(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),l._31(1,16384,null,0,rn.a,[z.a,l.t,l.W],null,null),(n()(),l._56(-1,null,["\n                            "])),(n()(),l._32(3,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l._31(4,147456,null,0,G.a,[z.a,l.t,l.W],{name:[0,"name"]},null),(n()(),l._56(-1,null,["\n                            "])),(n()(),l._32(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),l._56(7,null,["",""])),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,null,["\n                        "]))],function(n,e){n(e,4,0,"trash")},function(n,e){n(e,3,0,l._45(e,4)._hidden);n(e,7,0,l._57(e,7,0,l._45(e,8).transform("core.deletedoffline")))})}function View_AddonCalendarListPage_6(n){return l._58(0,[(n()(),l._32(0,0,null,null,40,null,null,null,null,null,null,null)),(n()(),l._56(-1,null,["\n                    "])),(n()(),l._27(16777216,null,null,1,null,View_AddonCalendarListPage_7)),l._31(3,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,null,["\n                    "])),(n()(),l._32(5,0,null,null,34,"a",[["class","addon-calendar-event item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.gotoEvent(n.context.$implicit.id)&&l}return l},Q.b,Q.a)),l._31(6,278528,null,0,on.i,[l.E,l.F,l.t,l.X],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._47(7,1),l._31(8,1097728,null,3,Z.a,[nn.a,z.a,l.t,l.W,[2,en.a]],null,null),l._53(335544320,7,{contentLabel:0}),l._53(603979776,8,{_buttons:1}),l._53(603979776,9,{_icons:1}),l._31(12,16384,null,0,un.a,[],null,null),(n()(),l._56(-1,2,["\n                        "])),(n()(),l._27(16777216,null,0,1,null,View_AddonCalendarListPage_8)),l._31(15,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,2,["\n                        "])),(n()(),l._27(16777216,null,0,1,null,View_AddonCalendarListPage_9)),l._31(18,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,2,["\n                        "])),(n()(),l._32(20,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),l._32(21,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),l._31(22,540672,null,0,sn.a,[l.t,m.b,v.b,dn.b,X.a,cn.a,g.b,_n.b,fn.b,hn.b,vn.b,[2,pn.a],[2,gn.a],[2,L.a],mn.a,b.b,En.a,bn.a,Cn.a,l._12,Ln.b],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(n()(),l._56(-1,2,["\n                        "])),(n()(),l._32(24,0,null,2,8,"p",[],null,null,null,null,null)),(n()(),l._56(25,null,["\n                            ","\n                            "])),l._50(26,2),(n()(),l._27(16777216,null,null,1,null,View_AddonCalendarListPage_10)),l._31(28,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,null,["\n                            "])),(n()(),l._27(16777216,null,null,1,null,View_AddonCalendarListPage_11)),l._31(31,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,null,["\n                        "])),(n()(),l._56(-1,2,["\n                        "])),(n()(),l._27(16777216,null,4,1,null,View_AddonCalendarListPage_12)),l._31(35,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,2,["\n                        "])),(n()(),l._27(16777216,null,4,1,null,View_AddonCalendarListPage_13)),l._31(38,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,2,["\n                    "])),(n()(),l._56(-1,null,["\n                "]))],function(n,e){n(e,3,0,e.context.$implicit.showDate);n(e,6,0,"addon-calendar-event",n(e,7,0,"addon-calendar-eventtype-"+e.context.$implicit.eventtype));n(e,15,0,e.context.$implicit.moduleIcon);n(e,18,0,e.context.$implicit.eventIcon&&!e.context.$implicit.moduleIcon);n(e,22,0,e.context.$implicit.name,e.context.$implicit.contextLevel,e.context.$implicit.contextInstanceId);n(e,28,0,e.context.$implicit.timeduration&&e.context.$implicit.endsSameDay);n(e,31,0,e.context.$implicit.timeduration&&!e.context.$implicit.endsSameDay);n(e,35,0,e.context.$implicit.offline&&!e.context.$implicit.deleted);n(e,38,0,e.context.$implicit.deleted)},function(n,e){n(e,5,0,e.context.$implicit.name,e.context.$implicit.id==e.component.eventId);n(e,25,0,l._57(e,25,0,n(e,26,0,l._45(e.parent.parent,0),1e3*e.context.$implicit.timestart,"strftimetime")))})}function View_AddonCalendarListPage_5(n){return l._58(0,[(n()(),l._32(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),l._31(1,16384,null,0,yn.a,[z.a,l.t,l.W,cn.a,An.l,In.a],null,null),(n()(),l._56(-1,null,["\n                "])),(n()(),l._27(16777216,null,null,1,null,View_AddonCalendarListPage_6)),l._31(4,802816,null,0,on.j,[l._12,l._7,l.E],{ngForOf:[0,"ngForOf"]},null),(n()(),l._56(-1,null,["\n            "]))],function(n,e){n(e,4,0,e.component.filteredEvents)},null)}function View_AddonCalendarListPage_14(n){return l._58(0,[(n()(),l._32(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,Pn.b,Pn.a)),l._31(1,212992,null,0,On.a,[l.t,gn.a],null,null),l._31(2,1228800,null,2,wn.a,[cn.a],null,null),l._53(335544320,10,{_mainButton:0}),l._53(603979776,11,{_fabLists:1}),(n()(),l._56(-1,0,["\n            "])),(n()(),l._32(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.openEdit()&&l}return l},Dn.b,Dn.a)),l._31(7,49152,[[10,4]],0,xn.a,[z.a,l.t,l.W],null,null),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,0,["\n                "])),(n()(),l._32(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l._31(11,147456,null,0,G.a,[z.a,l.t,l.W],{name:[0,"name"]},null),(n()(),l._56(-1,0,["\n            "])),(n()(),l._56(-1,0,["\n        "]))],function(n,e){n(e,1,0);n(e,11,0,"add")},function(n,e){n(e,6,0,l._57(e,6,0,l._45(e,8).transform("addon.calendar.newevent")));n(e,10,0,l._45(e,11)._hidden)})}function View_AddonCalendarListPage_0(n){return l._58(0,[l._48(0,Vn.a,[fn.b,p.b]),l._53(402653184,1,{content:0}),l._53(402653184,2,{splitviewCtrl:0}),(n()(),l._32(3,0,null,null,40,"ion-header",[],null,null,null,null,null)),l._31(4,16384,null,0,Sn.a,[z.a,l.t,l.W,[2,Tn.a]],null,null),(n()(),l._56(-1,null,["\n    "])),(n()(),l._32(6,0,null,null,36,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Nn.b,Nn.a)),l._31(7,49152,null,0,kn.a,[Rn.a,[2,Tn.a],[2,pn.a],z.a,l.t,l.W],null,null),l._31(8,212992,null,0,$n.a,[kn.a,X.a,b.b],null,null),(n()(),l._56(-1,3,["\n        "])),(n()(),l._32(10,0,null,3,3,"ion-title",[],null,null,null,jn.b,jn.a)),l._31(11,49152,null,0,Wn.a,[z.a,l.t,l.W,[2,Mn.a],[2,kn.a]],null,null),(n()(),l._56(12,0,["",""])),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,3,["\n        "])),(n()(),l._32(15,0,null,2,26,"ion-buttons",[["end",""]],null,null,null,null,null)),l._31(16,16384,null,1,Un.a,[z.a,l.t,l.W,[2,Mn.a],[2,kn.a]],null,null),l._53(603979776,3,{_buttons:1}),(n()(),l._56(-1,null,["\n            "])),(n()(),l._32(19,0,null,null,9,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.openFilter(t)&&l}return l},Hn.b,Hn.a)),l._31(20,1097728,[[3,4]],0,Fn.a,[[8,""],z.a,l.t,l.W],null,null),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,0,["\n                "])),(n()(),l._27(16777216,null,0,1,null,View_AddonCalendarListPage_1)),l._31(24,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,0,["\n                "])),(n()(),l._27(16777216,null,0,1,null,View_AddonCalendarListPage_2)),l._31(27,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,0,["\n            "])),(n()(),l._56(-1,null,["\n            "])),(n()(),l._32(30,0,null,null,10,"core-context-menu",[],null,null,null,Yn.b,Yn.a)),l._31(31,245760,null,0,Gn.a,[X.a,zn.a,l.t,v.b,[2,Jn.a],g.b],null,null),(n()(),l._56(-1,0,["\n                "])),(n()(),l._32(33,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.openSettings()&&l}return l},Bn.b,Bn.a)),l._31(34,770048,null,0,Xn.a,[Gn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,0,["\n                "])),(n()(),l._32(37,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.doRefresh(null,t,!0)&&l}return l},Bn.b,Bn.a)),l._31(38,770048,null,0,Xn.a,[Gn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,0,["\n            "])),(n()(),l._56(-1,null,["\n        "])),(n()(),l._56(-1,3,["\n    "])),(n()(),l._56(-1,null,["\n"])),(n()(),l._56(-1,null,["\n"])),(n()(),l._32(45,0,null,null,35,"core-split-view",[],null,null,null,qn.b,qn.a)),l._31(46,245760,[[2,4]],0,L.a,[[2,pn.a],l.t,Kn.b,cn.a,X.a],null,null),(n()(),l._56(-1,0,["\n    "])),(n()(),l._32(48,0,null,0,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Qn.b,Qn.a)),l._31(49,4374528,[[1,4]],0,gn.a,[z.a,cn.a,In.a,l.t,l.W,Rn.a,Zn.a,l.N,[2,Tn.a],[2,pn.a]],null,null),(n()(),l._56(-1,1,["\n        "])),(n()(),l._32(51,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,e,t){var l=!0;if("ionRefresh"===e){l=!1!==n.component.doRefresh(t)&&l}return l},null,null)),l._31(52,212992,null,0,ne.a,[cn.a,gn.a,l.N,An.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),l._56(-1,null,["\n            "])),(n()(),l._32(54,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,ee.b,ee.a)),l._31(55,114688,null,0,te.a,[ne.a,z.a],{pullingText:[0,"pullingText"]},null),l._48(131072,B.a,[X.a,l.j]),(n()(),l._56(-1,null,["\n        "])),(n()(),l._56(-1,1,["\n        "])),(n()(),l._32(59,0,null,1,15,"core-loading",[],null,null,null,le.b,le.a)),l._31(60,638976,null,0,ie.a,[X.a,l.t,b.b,g.b],{hideUntil:[0,"hideUntil"]},null),(n()(),l._56(-1,0,["\n            "])),(n()(),l._56(-1,0,["\n            "])),(n()(),l._27(16777216,null,0,1,null,View_AddonCalendarListPage_3)),l._31(64,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,0,["\n\n            "])),(n()(),l._27(16777216,null,0,1,null,View_AddonCalendarListPage_4)),l._31(67,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,0,["\n\n            "])),(n()(),l._27(16777216,null,0,1,null,View_AddonCalendarListPage_5)),l._31(70,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,0,["\n\n            "])),(n()(),l._32(72,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.loadMoreEvents(t)&&l}return l},ae.b,ae.a)),l._31(73,573440,null,0,re.a,[[2,gn.a],v.b],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(n()(),l._56(-1,0,["\n        "])),(n()(),l._56(-1,1,["\n\n        "])),(n()(),l._56(-1,1,["\n        "])),(n()(),l._27(16777216,null,0,1,null,View_AddonCalendarListPage_14)),l._31(78,16384,null,0,on.k,[l._12,l._7],{ngIf:[0,"ngIf"]},null),(n()(),l._56(-1,1,["\n    "])),(n()(),l._56(-1,0,["\n"]))],function(n,e){var t=e.component;n(e,8,0);n(e,24,0,t.filter.filtered);n(e,27,0,!t.filter.filtered),n(e,31,0);n(e,34,0,l._57(e,34,0,l._45(e,35).transform("core.settings.settings")),"cog",600,!t.notificationsEnabled);n(e,38,0,l._57(e,38,0,l._45(e,39).transform("core.settings.synchronizenow")),t.syncIcon,!1,400,!t.eventsLoaded||!t.hasOffline||!t.isOnline),n(e,46,0);n(e,52,0,t.eventsLoaded);n(e,55,0,l._35(1,"",l._57(e,55,0,l._45(e,56).transform("core.pulltorefresh")),""));n(e,60,0,t.eventsLoaded);n(e,64,0,t.hasOffline);n(e,67,0,!t.filteredEvents||!t.filteredEvents.length);n(e,70,0,t.filteredEvents&&t.filteredEvents.length);n(e,73,0,t.canLoadMore,t.loadMoreError);n(e,78,0,t.canCreate)},function(n,e){n(e,6,0,l._45(e,7)._hidden,l._45(e,7)._sbPadding);n(e,12,0,l._57(e,12,0,l._45(e,13).transform("addon.calendar.calendarevents")));n(e,19,0,l._57(e,19,0,l._45(e,21).transform("core.filter")));n(e,48,0,l._45(e,49).statusbarPadding,l._45(e,49)._hasRefresher);n(e,51,0,"inactive"!==l._45(e,52).state,l._45(e,52)._top);n(e,54,0,l._45(e,55).r.state)})}Object.defineProperty(e,"__esModule",{value:!0});var l=t(0),i=t(5),a=t(3),r=t(26),o=t(32),u=t(111),s=t(189),d=t(283),c=t(284),_=t(492),f=t(55),h=t(191),v=t(4),p=t(24),g=t(2),m=t(1),E=t(154),b=t(9),C=t(12),L=t(29),y=t(13),A=t(167),I=t(37),P=t(762),O=this&&this.__decorate||function(n,e,t,l){var i,a=arguments.length,r=a<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,l);else for(var o=n.length-1;o>=0;o--)(i=n[o])&&(r=(a<3?i(r):a>3?i(e,t,r):i(e,t))||r);return a>3&&r&&Object.defineProperty(e,t,r),r},w=this&&this.__metadata||function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},D=function(){function AddonCalendarListPage(n,e,t,l,i,a,r,o,u,d,c,f,h,v,p,g,m,E){var b=this;this.calendarProvider=a,this.domUtils=r,this.coursesProvider=o,this.utils=u,this.calendarHelper=d,this.coursesHelper=c,this.eventsProvider=f,this.navCtrl=h,this.appProvider=v,this.calendarOffline=p,this.calendarSync=g,this.timeUtils=m,this.popoverCtrl=E,this.initialTime=0,this.daysLoaded=0,this.emptyEventsTimes=0,this.categoriesRetrieved=!1,this.getCategories=!1,this.categories={},this.onlineEvents=[],this.offlineEvents=[],this.deletedEvents=[],this.eventsLoaded=!1,this.events=[],this.notificationsEnabled=!1,this.filteredEvents=[],this.canLoadMore=!1,this.loadMoreError=!1,this.canCreate=!1,this.hasOffline=!1,this.isOnline=!1,this.filter={filtered:!1,courseId:null,categoryId:null,course:!1,group:!1,site:!1,user:!1,category:!1},this.siteHomeId=e.getCurrentSite().getSiteHomeId(),this.notificationsEnabled=i.isAvailable(),this.currentSiteId=e.getCurrentSiteId(),this.notificationsEnabled&&(this.obsDefaultTimeChange=f.on(s.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){a.scheduleEventsNotifications(b.onlineEvents)},this.currentSiteId)),this.eventId=n.get("eventId")||!1,s.a.ALL_TYPES.forEach(function(n){b.filter[n]=!0}),this.filter.courseId=n.get("courseId"),this.newEventObserver=f.on(s.a.NEW_EVENT_EVENT,function(n){n&&n.event&&(b.splitviewCtrl.isOn()&&b.splitviewCtrl.emptyDetails(),b.eventsLoaded=!1,b.refreshEvents(!0,!1).finally(function(){b.splitviewCtrl.isOn()&&n.event.id>0&&b.gotoEvent(n.event.id)}))},this.currentSiteId),this.discardedObserver=f.on(s.a.NEW_EVENT_DISCARDED_EVENT,function(){b.splitviewCtrl.isOn()&&b.splitviewCtrl.emptyDetails(),b.eventsLoaded=!1,b.refreshEvents(!0,!1)},this.currentSiteId),this.editEventObserver=f.on(s.a.EDIT_EVENT_EVENT,function(n){n&&n.event&&(b.eventsLoaded=!1,b.refreshEvents(!0,!1))},this.currentSiteId),this.syncObserver=f.on(_.a.AUTO_SYNCED,function(n){b.eventsLoaded=!1,b.refreshEvents(),b.splitviewCtrl.isOn()&&b.eventId&&n&&n.deleted&&-1!=n.deleted.indexOf(b.eventId)&&b.splitviewCtrl.emptyDetails()},this.currentSiteId),this.manualSyncObserver=f.on(_.a.MANUAL_SYNCED,function(n){n&&"list"!=n.source&&(b.eventsLoaded=!1,b.refreshEvents()),b.splitviewCtrl.isOn()&&b.eventId&&n&&n.deleted&&-1!=n.deleted.indexOf(b.eventId)&&b.splitviewCtrl.emptyDetails()},this.currentSiteId),this.deleteEventObserver=f.on(s.a.DELETED_EVENT_EVENT,function(n){n&&!n.sent?(b.markAsDeleted(n.eventId,!0),b.deletedEvents.push(n.eventId),b.hasOffline=!0):(b.splitviewCtrl.isOn()&&b.splitviewCtrl.emptyDetails(),b.eventsLoaded=!1,b.refreshEvents())},this.currentSiteId),this.undeleteEventObserver=f.on(s.a.UNDELETED_EVENT_EVENT,function(n){if(n&&n.eventId){b.markAsDeleted(n.eventId,!1);var e=b.deletedEvents.indexOf(n.eventId);-1!=e&&b.deletedEvents.splice(e,1),b.hasOffline=!!b.offlineEvents.length||!!b.deletedEvents.length}},this.currentSiteId),this.filterChangedObserver=this.eventsProvider.on(s.a.FILTER_CHANGED_EVENT,function(n){b.filter=n,b.calendarHelper.canEditEvents(b.filter.courseId).then(function(n){b.canCreate=n}),b.filterEvents(),b.domUtils.scrollToTop(b.content)}),this.onlineObserver=t.onchange().subscribe(function(){l.run(function(){b.isOnline=b.appProvider.isOnline()})})}return AddonCalendarListPage.prototype.ionViewDidLoad=function(){var n=this;this.eventId&&this.gotoEvent(this.eventId),this.syncIcon="spinner",this.fetchData(!1,!0,!1).then(function(){!n.eventId&&n.splitviewCtrl.isOn()&&n.events.length>0&&n.gotoEvent(n.onlineEvents[0]?n.onlineEvents[0].id:n.offlineEvents[0].id)})},AddonCalendarListPage.prototype.fetchData=function(n,e,t){var l=this;this.initialTime=this.timeUtils.timestamp(),this.daysLoaded=0,this.emptyEventsTimes=0,this.isOnline=this.appProvider.isOnline();return(e?this.calendarSync.syncEvents().then(function(n){n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0]),n.updated&&(n.source="list",l.eventsProvider.trigger(_.a.MANUAL_SYNCED,n,l.currentSiteId))}).catch(function(n){t&&l.domUtils.showErrorModalDefault(n,"core.errorsync",!0)}):Promise.resolve()).then(function(){var e=[];return l.hasOffline=!1,e.push(l.calendarHelper.canEditEvents(l.filter.courseId).then(function(n){l.canCreate=n})),e.push(l.coursesHelper.getCoursesForPopover(l.filter.courseId).then(function(e){return l.courses=e.courses,l.fetchEvents(n)})),e.push(l.calendarOffline.getAllEditedEvents().then(function(n){l.hasOffline=l.hasOffline||!!n.length,n.forEach(function(n){n.offline=!0,l.calendarHelper.formatEventData(n)}),l.offlineEvents=l.sortEvents(n)})),e.push(l.calendarOffline.getAllDeletedEventsIds().then(function(n){l.hasOffline=l.hasOffline||!!n.length,l.deletedEvents=n})),Promise.all(e)}).finally(function(){l.eventsLoaded=!0,l.syncIcon="sync"})},AddonCalendarListPage.prototype.fetchEvents=function(n){var e=this;return this.loadMoreError=!1,this.calendarProvider.getEventsList(this.initialTime,this.daysLoaded,s.a.DAYS_INTERVAL).then(function(t){if(0===t.length){if(e.emptyEventsTimes++,!(e.emptyEventsTimes>5))return e.daysLoaded+=s.a.DAYS_INTERVAL,e.fetchEvents();e.canLoadMore=!1,n&&(e.onlineEvents=[],e.filteredEvents=[],e.events=e.offlineEvents)}else{t.forEach(e.calendarHelper.formatEventData.bind(e.calendarHelper));var l=e.mergeEvents(t);e.getCategories=e.shouldLoadCategories(t),n?(e.onlineEvents=t,e.events=l):(e.onlineEvents=e.utils.mergeArraysWithoutDuplicates(e.onlineEvents,t,"id"),e.events=e.utils.mergeArraysWithoutDuplicates(e.events,l,"id")),e.filterEvents(),e.filteredEvents.forEach(function(n,t){n.showDate=e.showDate(n,e.filteredEvents[t-1]),n.endsSameDay=e.endsSameDay(n)}),e.canLoadMore=!0,e.calendarProvider.scheduleEventsNotifications(e.onlineEvents),e.daysLoaded+=s.a.DAYS_INTERVAL}e.content.resize()}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0),e.loadMoreError=!0}).then(function(){if(e.getCategories)return e.getCategories=!1,e.loadCategories()})},AddonCalendarListPage.prototype.loadMoreEvents=function(n){return this.fetchEvents().finally(function(){n&&n()})},AddonCalendarListPage.prototype.filterEvents=function(){this.filteredEvents=this.calendarHelper.getFilteredEvents(this.events,this.filter,this.categories)},AddonCalendarListPage.prototype.shouldLoadCategories=function(n){if(this.categoriesRetrieved||this.getCategories)return this.getCategories;return n.some(function(n){return"undefined"!=n.categoryid&&n.categoryid>0})||this.getCategories},AddonCalendarListPage.prototype.loadCategories=function(){var n=this;return this.coursesProvider.getCategories(0,!0).then(function(e){n.categoriesRetrieved=!0,n.categories={},e.forEach(function(e){n.categories[e.id]=e})}).catch(function(){})},AddonCalendarListPage.prototype.mergeEvents=function(n){var e=this;if(!this.offlineEvents.length&&!this.deletedEvents.length)return n;var t=this.initialTime+I.a.SECONDS_DAY*this.daysLoaded,l=t+I.a.SECONDS_DAY*s.a.DAYS_INTERVAL-1,i=n;this.deletedEvents.length&&i.forEach(function(n){n.deleted=-1!=e.deletedEvents.indexOf(n.id)}),this.offlineEvents.length&&(i=i.filter(function(n){return!e.offlineEvents.find(function(e){return e.id==n.id})}));var a=this.offlineEvents.filter(function(n){return 0==e.daysLoaded&&n.timestart<t||(n.timestart>=t||n.timestart+n.timeduration>=t)&&n.timestart<=l});return i=i.concat(a),this.sortEvents(i)},AddonCalendarListPage.prototype.sortEvents=function(n){return n.sort(function(n,e){return n.timestart==e.timestart?n.timeduration-e.timeduration:n.timestart-e.timestart})},AddonCalendarListPage.prototype.doRefresh=function(n,e,t){return this.eventsLoaded?this.refreshEvents(!0,t).finally(function(){n&&n.complete(),e&&e()}):Promise.resolve()},AddonCalendarListPage.prototype.refreshEvents=function(n,e){var t=this;this.syncIcon="spinner";var l=[];return l.push(this.calendarProvider.invalidateEventsList()),l.push(this.calendarProvider.invalidateAllowedEventTypes()),this.categoriesRetrieved&&(l.push(this.coursesProvider.invalidateCategories(0,!0)),this.categoriesRetrieved=!1),Promise.all(l).finally(function(){return t.fetchData(!0,n,e)})},AddonCalendarListPage.prototype.showDate=function(n,e){return!e||!y(1e3*n.timestart).isSame(1e3*e.timestart,"day")},AddonCalendarListPage.prototype.endsSameDay=function(n){return!n.timeduration||y(1e3*n.timestart).isSame(1e3*(n.timestart+n.timeduration),"day")},AddonCalendarListPage.prototype.openFilter=function(n){this.popoverCtrl.create(P.a,{courses:this.courses,filter:this.filter}).present({ev:n})},AddonCalendarListPage.prototype.openEdit=function(n){this.eventId=void 0;var e={};n&&(e.eventId=n),this.filter.courseId&&(e.courseId=this.filter.courseId),this.splitviewCtrl.push("AddonCalendarEditEventPage",e)},AddonCalendarListPage.prototype.openSettings=function(){this.navCtrl.push("AddonCalendarSettingsPage")},AddonCalendarListPage.prototype.gotoEvent=function(n){this.eventId=n,n<0?this.openEdit(n):this.splitviewCtrl.push("AddonCalendarEventPage",{id:n})},AddonCalendarListPage.prototype.markAsDeleted=function(n,e){var t=this.onlineEvents.find(function(e){return e.id==n});t&&(t.deleted=e)},AddonCalendarListPage.prototype.ngOnDestroy=function(){this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off(),this.newEventObserver&&this.newEventObserver.off(),this.discardedObserver&&this.discardedObserver.off(),this.editEventObserver&&this.editEventObserver.off(),this.deleteEventObserver&&this.deleteEventObserver.off(),this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.syncObserver&&this.syncObserver.off(),this.manualSyncObserver&&this.manualSyncObserver.off(),this.filterChangedObserver&&this.filterChangedObserver.off(),this.onlineObserver&&this.onlineObserver.unsubscribe()},O([Object(l._10)(i.f),w("design:type",i.f)],AddonCalendarListPage.prototype,"content",void 0),O([Object(l._10)(L.a),w("design:type",L.a)],AddonCalendarListPage.prototype,"splitviewCtrl",void 0),AddonCalendarListPage=O([Object(l.m)({selector:"page-addon-calendar-list",templateUrl:"list.html"}),w("design:paramtypes",[i.t,m.b,A.a,l.N,E.a,s.a,v.b,f.b,g.b,c.a,h.a,b.b,i.s,C.b,d.a,_.a,p.b,i.w])],AddonCalendarListPage)}(),x=this&&this.__decorate||function(n,e,t,l){var i,a=arguments.length,r=a<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,l);else for(var o=n.length-1;o>=0;o--)(i=n[o])&&(r=(a<3?i(r):a>3?i(e,t,r):i(e,t))||r);return a>3&&r&&Object.defineProperty(e,t,r),r},V=function(){function AddonCalendarListPageModule(){}return AddonCalendarListPageModule=x([Object(l.J)({declarations:[D],imports:[r.a,o.a,u.a,i.l.forChild(D),a.b.forChild()]})],AddonCalendarListPageModule)}(),S=t(1551),T=t(1552),N=t(1553),k=t(1554),R=t(1555),$=t(1556),j=t(1557),W=t(1558),M=t(1559),U=t(1560),H=t(1561),F=t(1562),Y=t(1563),G=t(48),z=t(8),J=t(79),B=t(25),X=t(18),q=t(126),K=t(118),Q=t(31),Z=t(22),nn=t(21),en=t(27),tn=t(103),ln=t(85),an=t(78),rn=t(253),on=t(7),un=t(33),sn=t(49),dn=t(10),cn=t(16),_n=t(19),fn=t(6),hn=t(17),vn=t(14),pn=t(20),gn=t(28),mn=t(42),En=t(43),bn=t(30),Cn=t(36),Ln=t(40),yn=t(87),An=t(45),In=t(34),Pn=t(291),On=t(258),wn=t(221),Dn=t(292),xn=t(193),Vn=t(231),Sn=t(379),Tn=t(41),Nn=t(739),kn=t(216),Rn=t(35),$n=t(486),jn=t(740),Wn=t(324),Mn=t(252),Un=t(380),Hn=t(47),Fn=t(44),Yn=t(93),Gn=t(81),zn=t(72),Jn=t(80),Bn=t(94),Xn=t(86),qn=t(487),Kn=t(70),Qn=t(185),Zn=t(112),ne=t(163),ee=t(217),te=t(178),le=t(57),ie=t(54),ae=t(381),re=t(281),oe=t(73),ue=l._30({encapsulation:2,styles:[],data:{}}),se=l._28("page-addon-calendar-list",D,function View_AddonCalendarListPage_Host_0(n){return l._58(0,[(n()(),l._32(0,0,null,null,1,"page-addon-calendar-list",[],null,null,null,View_AddonCalendarListPage_0,ue)),l._31(1,180224,null,0,D,[oe.a,m.b,A.a,l.N,E.a,s.a,v.b,f.b,g.b,c.a,h.a,b.b,pn.a,C.b,d.a,_.a,p.b,zn.a],null,null)],null,null)},{},{},[]),de=t(23),ce=t(375),_e=t(376),fe=t(378),he=t(377),ve=t(485),pe=t(738),ge=t(277);t.d(e,"AddonCalendarListPageModuleNgFactory",function(){return me});var me=l._29(V,[],function(n){return l._41([l._42(512,l.o,l._22,[[8,[S.a,T.a,N.a,k.a,R.a,$.a,j.a,W.a,M.a,U.a,H.a,F.a,Y.a,se]],[3,l.o],l.L]),l._42(4608,on.m,on.l,[l.G,[2,on.w]]),l._42(4608,de.x,de.x,[]),l._42(4608,de.d,de.d,[]),l._42(4608,ce.b,ce.a,[]),l._42(4608,_e.a,_e.b,[]),l._42(4608,fe.b,fe.a,[]),l._42(4608,he.b,he.a,[]),l._42(4608,X.a,X.a,[ve.a,ce.b,_e.a,fe.b,he.b,X.b,X.c]),l._42(512,on.b,on.b,[]),l._42(512,de.v,de.v,[]),l._42(512,de.i,de.i,[]),l._42(512,de.s,de.s,[]),l._42(512,pe.a,pe.a,[]),l._42(512,a.b,a.b,[]),l._42(512,o.a,o.a,[]),l._42(512,u.a,u.a,[]),l._42(512,r.a,r.a,[]),l._42(512,pe.b,pe.b,[]),l._42(512,V,V,[]),l._42(256,X.c,void 0,[]),l._42(256,X.b,void 0,[]),l._42(256,ge.a,D,[])])})}});
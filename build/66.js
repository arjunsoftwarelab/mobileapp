webpackJsonp([66],{2110:function(e,n,l){"use strict";function View_CoreChronoComponent_0(e){return t._58(0,[t._48(0,q.a,[H.b,s.b]),(e()(),t._32(1,0,null,null,2,"span",[["role","timer"]],null,null,null,null,null)),(e()(),t._56(2,null,["",""])),t._50(3,1)],null,function(e,n){var l=n.component;e(n,2,0,t._57(n,2,0,e(n,3,0,t._45(n,0),l.time/1e3)))})}function View_CoreEmulatorCaptureMediaPage_1(e){return t._58(0,[(e()(),t._32(0,0,null,null,3,"button",[["ion-button",""]],null,[[null,"click"]],function(e,n,l){var t=!0;if("click"===n){t=!1!==e.component.done()&&t}return t},T.b,T.a)),t._31(1,1097728,[[8,4]],0,x.a,[[8,""],O.a,t.t,t.W],null,null),(e()(),t._56(2,0,["",""])),t._48(131072,F.a,[S.a,t.j])],null,function(e,n){e(n,2,0,t._57(n,2,0,t._45(n,3).transform("core.done")))})}function View_CoreEmulatorCaptureMediaPage_2(e){return t._58(0,[(e()(),t._32(0,0,[[1,0],["streamVideo",1]],null,0,"video",[["autoplay",""],["class","core-webcam-stream"]],[[8,"hidden",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.hasCaptured)})}function View_CoreEmulatorCaptureMediaPage_3(e){return t._58(0,[(e()(),t._32(0,0,[[2,0],["previewVideo",1]],null,0,"video",[["class","core-webcam-video-captured"],["controls",""]],[[8,"hidden",0]],null,null,null,null))],null,function(e,n){e(n,0,0,!n.component.hasCaptured)})}function View_CoreEmulatorCaptureMediaPage_4(e){return t._58(0,[(e()(),t._32(0,0,[[3,0],["imgCanvas",1]],null,0,"canvas",[["class","core-webcam-image-canvas"]],null,null,null,null,null))],null,null)}function View_CoreEmulatorCaptureMediaPage_5(e){return t._58(0,[(e()(),t._32(0,0,[[4,0],["previewImage",1]],null,1,"img",[["class","core-webcam-image"]],[[8,"hidden",0],[8,"alt",0]],null,null,null,null)),t._48(131072,F.a,[S.a,t.j])],null,function(e,n){e(n,0,0,!n.component.hasCaptured,t._35(1,"",t._57(n,0,1,t._45(n,1).transform("core.capturedimage")),""))})}function View_CoreEmulatorCaptureMediaPage_8(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"ion-icon",[["name","microphone"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(1,147456,null,0,B.a,[O.a,t.t,t.W],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"microphone")},function(e,n){e(n,0,0,t._45(n,1)._hidden)})}function View_CoreEmulatorCaptureMediaPage_9(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"ion-icon",[["name","square"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(1,147456,null,0,B.a,[O.a,t.t,t.W],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"square")},function(e,n){e(n,0,0,t._45(n,1)._hidden)})}function View_CoreEmulatorCaptureMediaPage_7(e){return t._58(0,[(e()(),t._32(0,0,null,null,8,"button",[["clear",""],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,l){var t=!0;if("click"===n){t=!1!==e.component.actionClicked()&&t}return t},T.b,T.a)),t._31(1,1097728,null,0,x.a,[[8,""],O.a,t.t,t.W],{clear:[0,"clear"]},null),(e()(),t._56(-1,0,["\n                    "])),(e()(),t._27(16777216,null,0,1,null,View_CoreEmulatorCaptureMediaPage_8)),t._31(4,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,0,["\n                    "])),(e()(),t._27(16777216,null,0,1,null,View_CoreEmulatorCaptureMediaPage_9)),t._31(7,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,0,["\n                "]))],function(e,n){var l=n.component;e(n,1,0,"");e(n,4,0,!l.isCapturing);e(n,7,0,l.isCapturing)},function(e,n){e(n,0,0,n.component.title)})}function View_CoreEmulatorCaptureMediaPage_6(e){return t._58(0,[(e()(),t._32(0,0,null,null,11,"div",[["class","core-audio-record-container"]],null,null,null,null,null)),(e()(),t._56(-1,null,["\n                "])),(e()(),t._56(-1,null,["\n                "])),(e()(),t._32(3,0,[[5,0],["streamAudio",1]],null,0,"canvas",[["class","core-audio-canvas"]],[[8,"hidden",0]],null,null,null,null)),(e()(),t._56(-1,null,["\n\n                "])),(e()(),t._56(-1,null,["\n                "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_7)),t._31(7,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n\n                "])),(e()(),t._56(-1,null,["\n                "])),(e()(),t._32(10,0,[[6,0],["previewAudio",1]],null,0,"audio",[["class","core-audio-captured"],["controls",""]],[[8,"hidden",0]],null,null,null,null)),(e()(),t._56(-1,null,["\n            "]))],function(e,n){var l=n.component;e(n,7,0,!l.hasCaptured&&l.isCordovaAudioCapture)},function(e,n){var l=n.component;e(n,3,0,l.hasCaptured||l.isCordovaAudioCapture);e(n,10,0,!l.hasCaptured)})}function View_CoreEmulatorCaptureMediaPage_12(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"ion-icon",[["name","microphone"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(1,147456,null,0,B.a,[O.a,t.t,t.W],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"microphone")},function(e,n){e(n,0,0,t._45(n,1)._hidden)})}function View_CoreEmulatorCaptureMediaPage_13(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"ion-icon",[["name","videocam"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(1,147456,null,0,B.a,[O.a,t.t,t.W],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"videocam")},function(e,n){e(n,0,0,t._45(n,1)._hidden)})}function View_CoreEmulatorCaptureMediaPage_14(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"ion-icon",[["name","camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(1,147456,null,0,B.a,[O.a,t.t,t.W],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"camera")},function(e,n){e(n,0,0,t._45(n,1)._hidden)})}function View_CoreEmulatorCaptureMediaPage_15(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"ion-icon",[["name","square"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(1,147456,null,0,B.a,[O.a,t.t,t.W],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"square")},function(e,n){e(n,0,0,t._45(n,1)._hidden)})}function View_CoreEmulatorCaptureMediaPage_11(e){return t._58(0,[(e()(),t._32(0,0,null,null,14,"button",[["clear",""],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,l){var t=!0;if("click"===n){t=!1!==e.component.actionClicked()&&t}return t},T.b,T.a)),t._31(1,1097728,null,0,x.a,[[8,""],O.a,t.t,t.W],{clear:[0,"clear"]},null),(e()(),t._56(-1,0,["\n                "])),(e()(),t._27(16777216,null,0,1,null,View_CoreEmulatorCaptureMediaPage_12)),t._31(4,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,0,["\n                "])),(e()(),t._27(16777216,null,0,1,null,View_CoreEmulatorCaptureMediaPage_13)),t._31(7,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,0,["\n                "])),(e()(),t._27(16777216,null,0,1,null,View_CoreEmulatorCaptureMediaPage_14)),t._31(10,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,0,["\n                "])),(e()(),t._27(16777216,null,0,1,null,View_CoreEmulatorCaptureMediaPage_15)),t._31(13,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,0,["\n            "]))],function(e,n){var l=n.component;e(n,1,0,"");e(n,4,0,!l.isCapturing&&l.isAudio);e(n,7,0,!l.isCapturing&&l.isVideo);e(n,10,0,l.isImage);e(n,13,0,l.isCapturing)},function(e,n){e(n,0,0,n.component.title)})}function View_CoreEmulatorCaptureMediaPage_16(e){return t._58(0,[(e()(),t._32(0,0,null,null,6,"button",[["clear",""],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,l){var t=!0;if("click"===n){t=!1!==e.component.discard()&&t}return t},T.b,T.a)),t._31(1,1097728,null,0,x.a,[[8,""],O.a,t.t,t.W],{clear:[0,"clear"]},null),t._48(131072,F.a,[S.a,t.j]),(e()(),t._56(-1,0,["\n                "])),(e()(),t._32(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(5,147456,null,0,B.a,[O.a,t.t,t.W],{name:[0,"name"]},null),(e()(),t._56(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"trash")},function(e,n){e(n,0,0,t._57(n,0,0,t._45(n,2).transform("core.discard")));e(n,4,0,t._45(n,5)._hidden)})}function View_CoreEmulatorCaptureMediaPage_17(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"core-chrono",[],[[8,"hidden",0]],[[null,"onEnd"]],function(e,n,l){var t=!0;if("onEnd"===n){t=!1!==e.component.stopCapturing()&&t}return t},View_CoreChronoComponent_0,G)),t._31(1,770048,null,0,z.a,[t.j],{running:[0,"running"],endTime:[1,"endTime"],reset:[2,"reset"]},{onEnd:"onEnd"})],function(e,n){var l=n.component;e(n,1,0,l.isCapturing,l.maxTime,l.resetChrono)},function(e,n){e(n,0,0,n.component.hasCaptured)})}function View_CoreEmulatorCaptureMediaPage_10(e){return t._58(0,[(e()(),t._32(0,0,null,null,22,"ion-row",[["class","row"]],null,null,null,null,null)),t._31(1,16384,null,0,J.a,[],null,null),(e()(),t._56(-1,null,["\n        "])),(e()(),t._32(3,0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),t._31(4,16384,null,0,N.a,[],null,null),(e()(),t._56(-1,null,["\n        "])),(e()(),t._32(6,0,null,null,8,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),t._31(7,16384,null,0,N.a,[],null,null),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_11)),t._31(10,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_16)),t._31(13,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n        "])),(e()(),t._56(-1,null,["\n        "])),(e()(),t._32(16,0,null,null,5,"ion-col",[["class","chrono-container col"],["padding",""],["text-end",""]],null,null,null,null,null)),t._31(17,16384,null,0,N.a,[],null,null),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_17)),t._31(20,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n        "])),(e()(),t._56(-1,null,["\n    "]))],function(e,n){var l=n.component;e(n,10,0,!l.hasCaptured&&!l.isCordovaAudioCapture);e(n,13,0,l.hasCaptured);e(n,20,0,!l.isImage)},null)}function View_CoreEmulatorCaptureMediaPage_0(e){return t._58(0,[t._53(671088640,1,{streamVideo:0}),t._53(671088640,2,{previewVideo:0}),t._53(671088640,3,{imgCanvas:0}),t._53(671088640,4,{previewImage:0}),t._53(671088640,5,{streamAudio:0}),t._53(671088640,6,{previewAudio:0}),(e()(),t._32(6,0,null,null,30,"ion-header",[],null,null,null,null,null)),t._31(7,16384,null,0,K.a,[O.a,t.t,t.W,[2,Q.a]],null,null),(e()(),t._56(-1,null,["\n    "])),(e()(),t._32(9,0,null,null,26,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,X.b,X.a)),t._31(10,49152,null,0,Y.a,[Z.a,[2,Q.a],[2,$.a],O.a,t.t,t.W],null,null),t._31(11,212992,null,0,ee.a,[Y.a,S.a,ne.b],null,null),(e()(),t._56(-1,3,["\n        "])),(e()(),t._32(13,0,null,1,8,"ion-buttons",[["start",""]],null,null,null,null,null)),t._31(14,16384,null,1,le.a,[O.a,t.t,t.W,[2,te.a],[2,Y.a]],null,null),t._53(603979776,7,{_buttons:1}),(e()(),t._56(-1,null,["\n            "])),(e()(),t._32(17,0,null,null,3,"button",[["ion-button",""]],null,[[null,"click"]],function(e,n,l){var t=!0;if("click"===n){t=!1!==e.component.cancel()&&t}return t},T.b,T.a)),t._31(18,1097728,[[7,4]],0,x.a,[[8,""],O.a,t.t,t.W],null,null),(e()(),t._56(19,0,["",""])),t._48(131072,F.a,[S.a,t.j]),(e()(),t._56(-1,null,["\n        "])),(e()(),t._56(-1,3,["\n\n        "])),(e()(),t._32(23,0,null,3,3,"ion-title",[],null,null,null,ae.b,ae.a)),t._31(24,49152,null,0,ie.a,[O.a,t.t,t.W,[2,te.a],[2,Y.a]],null,null),(e()(),t._56(25,0,["",""])),t._48(131072,F.a,[S.a,t.j]),(e()(),t._56(-1,3,["\n\n        "])),(e()(),t._32(28,0,null,2,6,"ion-buttons",[["end",""]],null,null,null,null,null)),t._31(29,16384,null,1,le.a,[O.a,t.t,t.W,[2,te.a],[2,Y.a]],null,null),t._53(603979776,8,{_buttons:1}),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_1)),t._31(33,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n        "])),(e()(),t._56(-1,3,["\n    "])),(e()(),t._56(-1,null,["\n"])),(e()(),t._56(-1,null,["\n"])),(e()(),t._32(38,0,null,null,28,"ion-content",[["class","has-footer"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ue.b,ue.a)),t._31(39,4374528,null,0,re.a,[O.a,oe.a,se.a,t.t,t.W,Z.a,de.a,t.N,[2,Q.a],[2,$.a]],null,null),(e()(),t._56(-1,1,["\n    "])),(e()(),t._32(41,0,null,1,24,"core-loading",[],null,null,null,ce.b,ce.a)),t._31(42,638976,null,0,_e.a,[S.a,t.t,ne.b,me.b],{hideUntil:[0,"hideUntil"]},null),(e()(),t._56(-1,0,["\n        "])),(e()(),t._32(44,0,null,0,20,"div",[["class","core-av-wrapper"]],null,null,null,null,null)),(e()(),t._56(-1,null,["\n            "])),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_2)),t._31(48,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n\n            "])),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_3)),t._31(52,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n\n            "])),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_4)),t._31(56,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_5)),t._31(59,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n\n            "])),(e()(),t._56(-1,null,["\n            "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_6)),t._31(63,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n        "])),(e()(),t._56(-1,0,["\n    "])),(e()(),t._56(-1,1,["\n"])),(e()(),t._56(-1,null,["\n\n"])),(e()(),t._32(68,0,null,null,5,"ion-footer",[],null,null,null,null,null)),t._31(69,16384,null,0,pe.a,[O.a,t.t,t.W,[2,Q.a]],null,null),(e()(),t._56(-1,null,["\n    "])),(e()(),t._27(16777216,null,null,1,null,View_CoreEmulatorCaptureMediaPage_10)),t._31(72,16384,null,0,L.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n"])),(e()(),t._56(-1,null,["\n\n"]))],function(e,n){var l=n.component;e(n,11,0);e(n,33,0,l.hasCaptured);e(n,42,0,l.readyToCapture);e(n,48,0,!l.isAudio);e(n,52,0,l.isVideo);e(n,56,0,l.isImage);e(n,59,0,l.isImage);e(n,63,0,l.isAudio);e(n,72,0,l.readyToCapture)},function(e,n){var l=n.component;e(n,9,0,t._45(n,10)._hidden,t._45(n,10)._sbPadding);e(n,19,0,t._57(n,19,0,t._45(n,20).transform("core.cancel")));e(n,25,0,t._57(n,25,0,t._45(n,26).transform(l.title)));e(n,38,0,t._45(n,39).statusbarPadding,t._45(n,39)._hasRefresher)})}Object.defineProperty(n,"__esModule",{value:!0});var t=l(0),a=l(5),i=l(12),u=l(52),r=l(4),o=l(65),s=l(10),d=l(24),c=l(774),_=this&&this.__decorate||function(e,n,l,t){var a,i=arguments.length,u=i<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,l):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,n,l,t);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(u=(i<3?a(u):i>3?a(n,l,u):a(n,l))||u);return i>3&&u&&Object.defineProperty(n,l,u),u},m=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},p=this&&this.__awaiter||function(e,n,l,t){return new(l||(l=Promise))(function(a,i){function fulfilled(e){try{step(t.next(e))}catch(e){i(e)}}function rejected(e){try{step(t.throw(e))}catch(e){i(e)}}function step(e){e.done?a(e.value):new l(function(n){n(e.value)}).then(fulfilled,rejected)}step((t=t.apply(e,n||[])).next())})},h=this&&this.__generator||function(e,n){function verb(i){return function(r){return function step(i){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,t&&(a=t[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(t,i[1])).done)return a;switch(t=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,t=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){u.label=i[1];break}if(6===i[0]&&u.label<a[1]){u.label=a[1],a=i;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(i);break}a[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(e){i=[6,e],t=0}finally{l=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}var l,t,a,i,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},f=function(){function CoreEmulatorCaptureMediaPage(e,n,l,t,a,i,u,r,o){this.viewCtrl=e,this.domUtils=l,this.timeUtils=t,this.fileProvider=a,this.textUtils=i,this.cdr=u,this.plaform=r,this.media=o,this.window=window,this.type=n.get("type"),this.maxTime=n.get("maxTime"),this.facingMode=n.get("facingMode")||"environment",this.mimetype=n.get("mimetype"),this.extension=n.get("extension"),this.quality=n.get("quality")||.92,this.returnDataUrl=!!n.get("returnDataUrl")}return CoreEmulatorCaptureMediaPage.prototype.ngOnInit=function(){this.initVariables(),this.isCordovaAudioCapture?this.initCordovaMediaPlugin():this.initHtmlCapture()},CoreEmulatorCaptureMediaPage.prototype.initCordovaMediaPlugin=function(){return p(this,void 0,void 0,function(){var e,n,l;return h(this,function(t){switch(t.label){case 0:this.filePath=this.getFilePath(),e=this.textUtils.concatenatePaths(this.fileProvider.getBasePathInstant(),this.filePath),this.plaform.is("ios")&&(e=e.replace(/^file:\/\//,"")),t.label=1;case 1:return t.trys.push([1,3,,4]),n=this,[4,this.fileProvider.createFile(this.filePath)];case 2:return n.fileEntry=t.sent(),this.mediaFile=this.media.create(e),this.readyToCapture=!0,this.previewMedia=this.previewAudio.nativeElement,[3,4];case 3:return l=t.sent(),this.dismissWithError(-1,l.message||l),[3,4];case 4:return[2]}})})},CoreEmulatorCaptureMediaPage.prototype.initHtmlCapture=function(){var e=this,n={video:!this.isAudio&&{facingMode:this.facingMode},audio:!this.isImage};return navigator.mediaDevices.getUserMedia(n).then(function(n){var l=[];if(e.localMediaStream=n,e.isImage||(e.isVideo?e.previewMedia=e.previewVideo.nativeElement:(e.previewMedia=e.previewAudio.nativeElement,e.initAudioDrawer(e.localMediaStream),e.audioDrawer.start()),e.mediaRecorder=new e.window.MediaRecorder(e.localMediaStream,{mimeType:e.mimetype}),e.mediaRecorder.ondataavailable=function(e){e.data.size>0&&l.push(e.data)},e.mediaRecorder.onstop=function(){e.mediaBlob=new Blob(l),l=[],e.previewMedia.src=window.URL.createObjectURL(e.mediaBlob)}),e.isImage||e.isVideo){var t,a=!1;e.streamVideo.nativeElement.onloadedmetadata=function(){a||(a=!0,clearTimeout(t),e.readyToCapture=!0,e.streamVideo.nativeElement.onloadedmetadata=null,e.cdr.detectChanges())},"srcObject"in e.streamVideo.nativeElement?e.streamVideo.nativeElement.srcObject=e.localMediaStream:e.streamVideo.nativeElement.src=window.URL.createObjectURL(e.localMediaStream),t=setTimeout(function(){a||(a=!0,e.dismissWithError(-1,"Cannot connect to webcam."))},1e4)}else e.readyToCapture=!0}).catch(function(n){e.dismissWithError(-1,n.message||n)})},CoreEmulatorCaptureMediaPage.prototype.initAudioDrawer=function(e){var n=!0,l=!1,t=new(this.window.AudioContext||this.window.webkitAudioContext),a=this.streamAudio.nativeElement.getContext("2d"),i=t.createMediaStreamSource(e),u=t.createAnalyser(),r=u.frequencyBinCount,o=new Uint8Array(r),s=this.streamAudio.nativeElement.width,d=this.streamAudio.nativeElement.height,c=function(){if(l&&(requestAnimationFrame(c),!(n=!n))){var e=s/r,t=0;u.getByteTimeDomainData(o),a.fillStyle="rgb(200, 200, 200)",a.fillRect(0,0,s,d),a.lineWidth=1,a.strokeStyle="rgb(0, 0, 0)",a.beginPath();for(var i=0;i<r;i++){var _=o[i]/128*d/2;0===i?a.moveTo(t,_):a.lineTo(t,_),t+=e}a.lineTo(s,d/2),a.stroke()}};u.fftSize=2048,i.connect(u),this.audioDrawer={start:function(){l||(l=!0,c())},stop:function(){l=!1}}},CoreEmulatorCaptureMediaPage.prototype.initVariables=function(){"captureimage"==this.type&&(this.isCaptureImage=!0,this.type="image"),"video"==this.type?(this.isVideo=!0,this.title="core.capturevideo"):"audio"==this.type?(this.isAudio=!0,this.title="core.captureaudio"):"image"==this.type&&(this.isImage=!0,this.title="core.captureimage"),this.isCordovaAudioCapture=i.a.instance.isMobile()&&this.isAudio,this.isCordovaAudioCapture&&(this.extension=this.plaform.is("ios")?"wav":"aac",this.returnDataUrl=!1)},CoreEmulatorCaptureMediaPage.prototype.actionClicked=function(){var e=this;if(this.isCapturing)this.stopCapturing(),this.cdr.detectChanges();else if(this.isImage){var n=this.streamVideo.nativeElement.videoWidth,l=this.streamVideo.nativeElement.videoHeight,t=this.domUtils.showModalLoading();this.imgCanvas.nativeElement.width=n,this.imgCanvas.nativeElement.height=l,this.imgCanvas.nativeElement.getContext("2d").drawImage(this.streamVideo.nativeElement,0,0,n,l),this.imgCanvas.nativeElement.toBlob(function(n){t.dismiss(),e.mediaBlob=n,e.previewImage.nativeElement.setAttribute("src",window.URL.createObjectURL(e.mediaBlob)),e.hasCaptured=!0},this.mimetype,this.quality)}else this.isCapturing=!0,this.resetChrono=!1,this.isCordovaAudioCapture?(this.mediaFile.startRecord(),this.previewMedia.src=""):this.mediaRecorder&&this.mediaRecorder.start(),this.cdr.detectChanges()},CoreEmulatorCaptureMediaPage.prototype.cancel=function(){this.dismissWithError(3,"Canceled.","Camera cancelled"),this.isCordovaAudioCapture&&this.fileProvider.removeFile(this.filePath)},CoreEmulatorCaptureMediaPage.prototype.discard=function(){this.previewMedia&&this.previewMedia.pause(),this.streamVideo&&this.streamVideo.nativeElement.play(),this.audioDrawer&&this.audioDrawer.start(),this.hasCaptured=!1,this.isCapturing=!1,this.resetChrono=!0,delete this.mediaBlob,this.cdr.detectChanges()},CoreEmulatorCaptureMediaPage.prototype.dismissWithData=function(e){this.viewCtrl.dismiss(e,"success")},CoreEmulatorCaptureMediaPage.prototype.dismissWithError=function(e,n,l){this.viewCtrl.dismiss(this.isImage&&!this.isCaptureImage?l||n:{code:e,message:n},"error")},CoreEmulatorCaptureMediaPage.prototype.done=function(){return p(this,void 0,void 0,function(){var e,n,l,t,a;return h(this,function(i){switch(i.label){case 0:if(this.returnDataUrl)return this.dismissWithData(this.imgCanvas.nativeElement.toDataURL(this.mimetype,this.quality)),[2];if(!this.mediaBlob&&!this.isCordovaAudioCapture)return this.domUtils.showErrorModal("Please capture the media first."),[2];e=this.fileEntry,n=this.domUtils.showModalLoading(),i.label=1;case 1:if(i.trys.push([1,7,8,9]),this.isCordovaAudioCapture)return[3,3];if(!this.mediaBlob)throw new Error("Please capture the media first.");return[4,this.fileProvider.writeFile(this.getFilePath(),this.mediaBlob)];case 2:e=i.sent(),i.label=3;case 3:return!this.isImage||this.isCaptureImage?[3,4]:(this.dismissWithData(e.toURL()),[3,6]);case 4:return[4,this.fileProvider.getMetadata(e)];case 5:l=i.sent(),t=null,this.extension&&(t=o.a.instance.getMimeType(this.extension)),this.dismissWithData([{name:e.name,fullPath:e.nativeURL||e.fullPath,type:t,lastModifiedDate:l.modificationTime,size:l.size,getFormatData:function(e,n){}}]),i.label=6;case 6:return[3,9];case 7:return a=i.sent(),this.domUtils.showErrorModal(a),[3,9];case 8:return n.dismiss(),[7];case 9:return[2]}})})},CoreEmulatorCaptureMediaPage.prototype.getFilePath=function(){var e=this.type+"_"+this.timeUtils.readableTimestamp()+"."+this.extension;return this.textUtils.concatenatePaths(u.b.TMPFOLDER,"media/"+e)},CoreEmulatorCaptureMediaPage.prototype.stopCapturing=function(){this.isCapturing=!1,this.hasCaptured=!0,this.isCordovaAudioCapture?(this.mediaFile.stopRecord(),this.previewMedia.src=this.fileProvider.convertFileSrc(this.fileEntry.toURL())):(this.streamVideo&&this.streamVideo.nativeElement.pause(),this.audioDrawer&&this.audioDrawer.stop(),this.mediaRecorder&&this.mediaRecorder.stop())},CoreEmulatorCaptureMediaPage.prototype.ngOnDestroy=function(){if(this.mediaFile&&this.mediaFile.release(),this.localMediaStream){this.localMediaStream.getTracks().forEach(function(e){e.stop()})}this.streamVideo&&this.streamVideo.nativeElement.pause(),this.previewMedia&&this.previewMedia.pause(),this.audioDrawer&&this.audioDrawer.stop(),delete this.mediaBlob},_([Object(t._10)("streamVideo"),m("design:type",t.t)],CoreEmulatorCaptureMediaPage.prototype,"streamVideo",void 0),_([Object(t._10)("previewVideo"),m("design:type",t.t)],CoreEmulatorCaptureMediaPage.prototype,"previewVideo",void 0),_([Object(t._10)("imgCanvas"),m("design:type",t.t)],CoreEmulatorCaptureMediaPage.prototype,"imgCanvas",void 0),_([Object(t._10)("previewImage"),m("design:type",t.t)],CoreEmulatorCaptureMediaPage.prototype,"previewImage",void 0),_([Object(t._10)("streamAudio"),m("design:type",t.t)],CoreEmulatorCaptureMediaPage.prototype,"streamAudio",void 0),_([Object(t._10)("previewAudio"),m("design:type",t.t)],CoreEmulatorCaptureMediaPage.prototype,"previewAudio",void 0),CoreEmulatorCaptureMediaPage=_([Object(t.m)({selector:"page-core-emulator-capture-media",templateUrl:"capture-media.html"}),m("design:paramtypes",[a.G,a.t,r.b,d.b,u.b,s.b,t.j,a.v,c.a])],CoreEmulatorCaptureMediaPage)}(),C=l(3),g=l(26),v=l(32),w=this&&this.__decorate||function(e,n,l,t){var a,i=arguments.length,u=i<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,l):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,n,l,t);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(u=(i<3?a(u):i>3?a(n,l,u):a(n,l))||u);return i>3&&u&&Object.defineProperty(n,l,u),u},b=function(){function CoreEmulatorCaptureMediaPageModule(){}return CoreEmulatorCaptureMediaPageModule=w([Object(t.J)({declarations:[f],imports:[g.a,v.a,a.l.forChild(f),C.b.forChild()]})],CoreEmulatorCaptureMediaPageModule)}(),E=l(1551),M=l(1552),y=l(1553),P=l(1554),V=l(1555),I=l(1556),k=l(1557),A=l(1558),j=l(1559),R=l(1560),W=l(1561),U=l(1562),D=l(1563),T=l(47),x=l(44),O=l(8),F=l(25),S=l(18),B=l(48),L=l(7),q=l(1600),H=l(6),z=l(1611),G=t._30({encapsulation:2,styles:[],data:{}}),J=(t._28("core-chrono",z.a,function View_CoreChronoComponent_Host_0(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"core-chrono",[],null,null,null,View_CoreChronoComponent_0,G)),t._31(1,770048,null,0,z.a,[t.j],null,null)],function(e,n){e(n,1,0)},null)},{running:"running",startTime:"startTime",endTime:"endTime",reset:"reset"},{onEnd:"onEnd"},[]),l(120)),N=l(119),K=l(379),Q=l(41),X=l(739),Y=l(216),Z=l(35),$=l(20),ee=l(486),ne=l(9),le=l(380),te=l(252),ae=l(740),ie=l(324),ue=l(185),re=l(28),oe=l(16),se=l(34),de=l(112),ce=l(57),_e=l(54),me=l(2),pe=l(755),he=l(73),fe=t._30({encapsulation:2,styles:[],data:{}}),Ce=t._28("page-core-emulator-capture-media",f,function View_CoreEmulatorCaptureMediaPage_Host_0(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"page-core-emulator-capture-media",[],null,null,null,View_CoreEmulatorCaptureMediaPage_0,fe)),t._31(1,245760,null,0,f,[Q.a,he.a,r.b,d.b,u.b,s.b,t.j,oe.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ge=l(23),ve=l(375),we=l(376),be=l(378),Ee=l(377),Me=l(485),ye=l(738),Pe=l(111),Ve=l(277);l.d(n,"CoreEmulatorCaptureMediaPageModuleNgFactory",function(){return Ie});var Ie=t._29(b,[],function(e){return t._41([t._42(512,t.o,t._22,[[8,[E.a,M.a,y.a,P.a,V.a,I.a,k.a,A.a,j.a,R.a,W.a,U.a,D.a,Ce]],[3,t.o],t.L]),t._42(4608,L.m,L.l,[t.G,[2,L.w]]),t._42(4608,ge.x,ge.x,[]),t._42(4608,ge.d,ge.d,[]),t._42(4608,ve.b,ve.a,[]),t._42(4608,we.a,we.b,[]),t._42(4608,be.b,be.a,[]),t._42(4608,Ee.b,Ee.a,[]),t._42(4608,S.a,S.a,[Me.a,ve.b,we.a,be.b,Ee.b,S.b,S.c]),t._42(512,L.b,L.b,[]),t._42(512,ge.v,ge.v,[]),t._42(512,ge.i,ge.i,[]),t._42(512,ge.s,ge.s,[]),t._42(512,ye.a,ye.a,[]),t._42(512,C.b,C.b,[]),t._42(512,v.a,v.a,[]),t._42(512,Pe.a,Pe.a,[]),t._42(512,g.a,g.a,[]),t._42(512,ye.b,ye.b,[]),t._42(512,b,b,[]),t._42(256,S.c,void 0,[]),t._42(256,S.b,void 0,[]),t._42(256,Ve.a,f,[])])})}});
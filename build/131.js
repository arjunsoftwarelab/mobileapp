webpackJsonp([131],{2032:function(n,l,i){"use strict";function View_AddonModAssignSubmissionListPage_1(n){return s._58(0,[(n()(),s._32(0,0,null,null,3,"core-empty-box",[["icon","paper"]],null,null,null,T.b,T.a)),s._31(1,49152,null,0,E.a,[],{message:[0,"message"],icon:[1,"icon"]},null),s._48(131072,R.a,[U.a,s.j]),(n()(),s._56(-1,0,["\n            "]))],function(n,l){n(l,1,0,s._57(l,1,0,s._45(l,2).transform("addon.mod_assign.submissionstatus_")),"paper")},null)}function View_AddonModAssignSubmissionListPage_3(n){return s._58(0,[(n()(),s._32(0,0,null,null,3,"ion-label",[["id","addon-assign-groupslabel"]],null,null,null,null,null)),s._31(1,16384,[[3,4]],0,W.a,[N.a,s.t,s.W,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(n()(),s._56(2,null,["",""])),s._48(131072,R.a,[U.a,s.j])],function(n,l){n(l,1,0,"addon-assign-groupslabel")},function(n,l){n(l,2,0,s._57(l,2,0,s._45(l,3).transform("core.groupsseparate")))})}function View_AddonModAssignSubmissionListPage_4(n){return s._58(0,[(n()(),s._32(0,0,null,null,3,"ion-label",[["id","addon-assign-groupslabel"]],null,null,null,null,null)),s._31(1,16384,[[3,4]],0,W.a,[N.a,s.t,s.W,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(n()(),s._56(2,null,["",""])),s._48(131072,R.a,[U.a,s.j])],function(n,l){n(l,1,0,"addon-assign-groupslabel")},function(n,l){n(l,2,0,s._57(l,2,0,s._45(l,3).transform("core.groupsvisible")))})}function View_AddonModAssignSubmissionListPage_5(n){return s._58(0,[(n()(),s._32(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),s._31(1,16384,[[6,4]],0,B.a,[s.t],{value:[0,"value"]},null),(n()(),s._56(2,null,["",""]))],function(n,l){n(l,1,0,l.context.$implicit.id)},function(n,l){n(l,2,0,l.context.$implicit.name)})}function View_AddonModAssignSubmissionListPage_2(n){return s._58(0,[(n()(),s._32(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,F.b,F.a)),s._31(1,1097728,null,3,H.a,[Y.a,N.a,s.t,s.W,[2,q.a]],null,null),s._53(603979776,3,{contentLabel:0}),s._53(603979776,4,{_buttons:1}),s._53(603979776,5,{_icons:1}),s._31(5,16384,null,0,J.a,[],null,null),(n()(),s._56(-1,2,["\n                    "])),(n()(),s._27(16777216,null,1,1,null,View_AddonModAssignSubmissionListPage_3)),s._31(8,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,2,["\n                    "])),(n()(),s._27(16777216,null,1,1,null,View_AddonModAssignSubmissionListPage_4)),s._31(11,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,2,["\n                    "])),(n()(),s._32(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-assign-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(n,l,i){var t=!0,e=n.component;if("click"===l){t=!1!==s._45(n,14)._click(i)&&t}if("keyup.space"===l){t=!1!==s._45(n,14)._keyup()&&t}if("ngModelChange"===l){t=!1!==(e.groupId=i)&&t}if("ionChange"===l){t=!1!==e.setGroup(e.groupId)&&t}return t},K.b,K.a)),s._31(14,1228800,null,1,Q.a,[X.a,Y.a,N.a,s.t,s.W,[2,H.a],Z.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),s._53(603979776,6,{options:1}),s._51(1024,null,nn.l,function(n){return[n]},[Q.a]),s._31(17,671744,null,0,nn.q,[[8,null],[8,null],[8,null],[2,nn.l]],{model:[0,"model"]},{update:"ngModelChange"}),s._51(2048,null,nn.m,null,[nn.q]),s._31(19,16384,null,0,nn.n,[nn.m],null,null),(n()(),s._56(-1,null,["\n                        "])),(n()(),s._27(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_5)),s._31(22,802816,null,0,z.j,[s._12,s._7,s.E],{ngForOf:[0,"ngForOf"]},null),(n()(),s._56(-1,null,["\n                    "])),(n()(),s._56(-1,2,["\n                "]))],function(n,l){var i=l.component;n(l,8,0,i.groupInfo.separateGroups);n(l,11,0,i.groupInfo.visibleGroups);n(l,14,0,"action-sheet");n(l,17,0,i.groupId);n(l,22,0,i.groupInfo.groups)},function(n,l){n(l,13,0,s._45(l,14)._disabled,s._45(l,19).ngClassUntouched,s._45(l,19).ngClassTouched,s._45(l,19).ngClassPristine,s._45(l,19).ngClassDirty,s._45(l,19).ngClassValid,s._45(l,19).ngClassInvalid,s._45(l,19).ngClassPending)})}function View_AddonModAssignSubmissionListPage_7(n){return s._58(0,[(n()(),s._32(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),s._56(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.userfullname)})}function View_AddonModAssignSubmissionListPage_8(n){return s._58(0,[(n()(),s._32(0,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),s._56(1,null,["","",""])),s._48(131072,R.a,[U.a,s.j])],null,function(n,l){n(l,1,0,s._57(l,1,0,s._45(l,2).transform("addon.mod_assign.hiddenuser")),l.parent.context.$implicit.blindid)})}function View_AddonModAssignSubmissionListPage_10(n){return s._58(0,[(n()(),s._32(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),s._56(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.$implicit.groupname)})}function View_AddonModAssignSubmissionListPage_11(n){return s._58(0,[(n()(),s._32(0,0,null,null,2,"span",[["class","text-danger"]],null,null,null,null,null)),(n()(),s._56(1,null,["",""])),s._48(131072,R.a,[U.a,s.j])],null,function(n,l){n(l,1,0,s._57(l,1,0,s._45(l,2).transform("addon.mod_assign.noteam")))})}function View_AddonModAssignSubmissionListPage_12(n){return s._58(0,[(n()(),s._32(0,0,null,null,2,"span",[["class","text-danger"]],null,null,null,null,null)),(n()(),s._56(1,null,["",""])),s._48(131072,R.a,[U.a,s.j])],null,function(n,l){n(l,1,0,s._57(l,1,0,s._45(l,2).transform("addon.mod_assign.multipleteams")))})}function View_AddonModAssignSubmissionListPage_13(n){return s._58(0,[(n()(),s._32(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),s._56(1,null,["",""])),s._48(131072,R.a,[U.a,s.j])],null,function(n,l){n(l,1,0,s._57(l,1,0,s._45(l,2).transform("addon.mod_assign.defaultteam")))})}function View_AddonModAssignSubmissionListPage_9(n){return s._58(0,[(n()(),s._32(0,0,null,null,13,"p",[],null,null,null,null,null)),(n()(),s._56(-1,null,["\n                            "])),(n()(),s._27(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_10)),s._31(3,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,null,["\n                            "])),(n()(),s._27(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_11)),s._31(6,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,null,["\n                            "])),(n()(),s._27(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_12)),s._31(9,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,null,["\n                            "])),(n()(),s._27(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_13)),s._31(12,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,null,["\n                        "]))],function(n,l){var i=l.component;n(l,3,0,l.parent.context.$implicit.groupname);n(l,6,0,i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.noGroups&&!l.parent.context.$implicit.blindid);n(l,9,0,i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,12,0,!i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname)},null)}function View_AddonModAssignSubmissionListPage_14(n){return s._58(0,[(n()(),s._32(0,0,null,null,2,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),s._31(1,16384,null,0,ln.a,[N.a,s.t,s.W],{color:[0,"color"]},null),(n()(),s._56(2,null,["\n                            ","\n                        "]))],function(n,l){n(l,1,0,l.parent.context.$implicit.statusColor)},function(n,l){n(l,2,0,l.parent.context.$implicit.statusTranslated)})}function View_AddonModAssignSubmissionListPage_15(n){return s._58(0,[(n()(),s._32(0,0,null,null,3,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),s._31(1,16384,null,0,ln.a,[N.a,s.t,s.W],{color:[0,"color"]},null),(n()(),s._56(2,null,["\n                            ","\n                        "])),s._48(131072,R.a,[U.a,s.j])],function(n,l){n(l,1,0,l.parent.context.$implicit.gradingColor)},function(n,l){n(l,2,0,s._57(l,2,0,s._45(l,3).transform(l.parent.context.$implicit.gradingStatusTranslationId)))})}function View_AddonModAssignSubmissionListPage_6(n){return s._58(0,[(n()(),s._32(0,0,null,null,28,null,null,null,null,null,null,null)),(n()(),s._56(-1,null,["\n                    "])),(n()(),s._32(2,0,null,null,25,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,i){var s=!0;if("click"===l){s=!1!==n.component.loadSubmission(n.context.$implicit)&&s}return s},F.b,F.a)),s._31(3,1097728,null,3,H.a,[Y.a,N.a,s.t,s.W,[2,q.a]],null,null),s._53(335544320,7,{contentLabel:0}),s._53(603979776,8,{_buttons:1}),s._53(603979776,9,{_icons:1}),s._31(7,16384,null,0,J.a,[],null,null),(n()(),s._56(-1,2,["\n                        "])),(n()(),s._32(9,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,sn.b,sn.a)),s._31(10,770048,null,0,tn.a,[en.a,r.b,un.b,on.b,a.b,[2,b.a]],{user:[0,"user"],linkProfile:[1,"linkProfile"]},null),s._31(11,16384,null,0,an.a,[],null,null),(n()(),s._56(-1,2,["\n                        "])),(n()(),s._27(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_7)),s._31(14,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,2,["\n                        "])),(n()(),s._27(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_8)),s._31(17,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,2,["\n                        "])),(n()(),s._27(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_9)),s._31(20,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,2,["\n                        "])),(n()(),s._27(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_14)),s._31(23,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,2,["\n                        "])),(n()(),s._27(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_15)),s._31(26,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,2,["\n                    "])),(n()(),s._56(-1,null,["\n                "]))],function(n,l){var i=l.component;n(l,10,0,l.context.$implicit,!1);n(l,14,0,l.context.$implicit.userfullname);n(l,17,0,!l.context.$implicit.userfullname);n(l,20,0,i.assign.teamsubmission);n(l,23,0,l.context.$implicit.statusTranslated);n(l,26,0,l.context.$implicit.gradingStatusTranslationId)},function(n,l){n(l,2,0,l.context.$implicit.submitid==l.component.selectedSubmissionId)})}function View_AddonModAssignSubmissionListPage_16(n){return s._58(0,[(n()(),s._32(0,0,null,null,10,"ion-item",[["class","core-warning-card item item-block"],["icon-start",""],["text-wrap",""]],null,null,null,F.b,F.a)),s._31(1,1097728,null,3,H.a,[Y.a,N.a,s.t,s.W,[2,q.a]],null,null),s._53(335544320,10,{contentLabel:0}),s._53(603979776,11,{_buttons:1}),s._53(603979776,12,{_icons:1}),s._31(5,16384,null,0,J.a,[],null,null),(n()(),s._56(-1,2,["\n                    "])),(n()(),s._32(7,0,null,2,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._31(8,147456,[[12,4]],0,rn.a,[N.a,s.t,s.W],{name:[0,"name"]},null),(n()(),s._56(9,2,["\n                    ","\n                "])),s._48(131072,R.a,[U.a,s.j])],function(n,l){n(l,8,0,"warning")},function(n,l){n(l,7,0,s._45(l,8)._hidden);n(l,9,0,s._57(l,9,0,s._45(l,10).transform("addon.mod_assign.notallparticipantsareshown")))})}function View_AddonModAssignSubmissionListPage_0(n){return s._58(0,[s._53(402653184,1,{splitviewCtrl:0}),(n()(),s._32(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),s._31(2,16384,null,0,dn.a,[N.a,s.t,s.W,[2,_n.a]],null,null),(n()(),s._56(-1,null,["\n    "])),(n()(),s._32(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,gn.b,gn.a)),s._31(5,49152,null,0,cn.a,[X.a,[2,_n.a],[2,en.a],N.a,s.t,s.W],null,null),s._31(6,212992,null,0,fn.a,[cn.a,U.a,a.b],null,null),(n()(),s._56(-1,3,["\n        "])),(n()(),s._32(8,0,null,3,3,"ion-title",[],null,null,null,mn.b,mn.a)),s._31(9,49152,null,0,bn.a,[N.a,s.t,s.W,[2,pn.a],[2,cn.a]],null,null),(n()(),s._32(10,16777216,null,0,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),s._31(11,540672,null,0,hn.a,[s.t,r.b,d.b,An.b,U.a,vn.a,un.b,Pn.b,Sn.b,In.b,wn.b,[2,en.a],[2,Mn.a],[2,b.a],Ln.a,a.b,yn.a,xn.a,Cn.a,s._12,kn.b],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(n()(),s._56(-1,3,["\n\n        "])),(n()(),s._32(13,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),s._31(14,16384,null,1,Vn.a,[N.a,s.t,s.W,[2,pn.a],[2,cn.a]],null,null),s._53(603979776,2,{_buttons:1}),(n()(),s._56(-1,3,["\n    "])),(n()(),s._56(-1,null,["\n"])),(n()(),s._56(-1,null,["\n"])),(n()(),s._32(19,0,null,null,35,"core-split-view",[],null,null,null,Dn.b,Dn.a)),s._31(20,245760,[[1,4]],0,b.a,[[2,en.a],s.t,On.b,vn.a,U.a],null,null),(n()(),s._56(-1,0,["\n    "])),(n()(),s._32(22,0,null,0,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Gn.b,Gn.a)),s._31(23,4374528,null,0,Mn.a,[N.a,vn.a,jn.a,s.t,s.W,X.a,$n.a,s.N,[2,_n.a],[2,en.a]],null,null),(n()(),s._56(-1,1,["\n        "])),(n()(),s._32(25,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,i){var s=!0;if("ionRefresh"===l){s=!1!==n.component.refreshList(i)&&s}return s},null,null)),s._31(26,212992,null,0,Tn.a,[vn.a,Mn.a,s.N,En.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),s._56(-1,null,["\n            "])),(n()(),s._32(28,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Rn.b,Rn.a)),s._31(29,114688,null,0,Un.a,[Tn.a,N.a],{pullingText:[0,"pullingText"]},null),s._48(131072,R.a,[U.a,s.j]),(n()(),s._56(-1,null,["\n        "])),(n()(),s._56(-1,1,["\n        "])),(n()(),s._32(33,0,null,1,19,"core-loading",[],null,null,null,Wn.b,Wn.a)),s._31(34,638976,null,0,Nn.a,[U.a,s.t,a.b,un.b],{hideUntil:[0,"hideUntil"]},null),(n()(),s._56(-1,0,["\n            "])),(n()(),s._27(16777216,null,0,1,null,View_AddonModAssignSubmissionListPage_1)),s._31(37,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,0,["\n\n            "])),(n()(),s._32(39,0,null,0,12,"ion-list",[],null,null,null,null,null)),s._31(40,16384,null,0,Bn.a,[N.a,s.t,s.W,vn.a,En.l,jn.a],null,null),(n()(),s._56(-1,null,["\n                "])),(n()(),s._27(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_2)),s._31(43,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,null,["\n                "])),(n()(),s._56(-1,null,["\n                "])),(n()(),s._27(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_6)),s._31(47,802816,null,0,z.j,[s._12,s._7,s.E],{ngForOf:[0,"ngForOf"]},null),(n()(),s._56(-1,null,["\n\n                "])),(n()(),s._27(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_16)),s._31(50,16384,null,0,z.k,[s._12,s._7],{ngIf:[0,"ngIf"]},null),(n()(),s._56(-1,null,["\n            "])),(n()(),s._56(-1,0,["\n        "])),(n()(),s._56(-1,1,["\n    "])),(n()(),s._56(-1,0,["\n"])),(n()(),s._56(-1,null,["\n"]))],function(n,l){var i=l.component;n(l,6,0);n(l,11,0,i.title,"module",i.moduleId,i.courseId),n(l,20,0);n(l,26,0,i.loaded);n(l,29,0,s._35(1,"",s._57(l,29,0,s._45(l,30).transform("core.pulltorefresh")),""));n(l,34,0,i.loaded);n(l,37,0,!i.submissions||0==i.submissions.length);n(l,43,0,i.groupInfo.separateGroups||i.groupInfo.visibleGroups);n(l,47,0,i.submissions);n(l,50,0,!i.haveAllParticipants)},function(n,l){n(l,4,0,s._45(l,5)._hidden,s._45(l,5)._sbPadding);n(l,22,0,s._45(l,23).statusbarPadding,s._45(l,23)._hasRefresher);n(l,25,0,"inactive"!==s._45(l,26).state,s._45(l,26)._top);n(l,28,0,s._45(l,29).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var s=i(0),t=i(5),e=i(3),u=i(26),o=i(32),a=i(9),r=i(1),d=i(4),_=i(75),g=i(83),c=i(136),f=i(288),m=i(187),b=i(29),p=this&&this.__decorate||function(n,l,i,s){var t,e=arguments.length,u=e<3?l:null===s?s=Object.getOwnPropertyDescriptor(l,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,l,i,s);else for(var o=n.length-1;o>=0;o--)(t=n[o])&&(u=(e<3?t(u):e>3?t(l,i,u):t(l,i))||u);return e>3&&u&&Object.defineProperty(l,i,u),u},h=this&&this.__metadata||function(n,l){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,l)},A=this&&this.__awaiter||function(n,l,i,s){return new(i||(i=Promise))(function(t,e){function fulfilled(n){try{step(s.next(n))}catch(n){e(n)}}function rejected(n){try{step(s.throw(n))}catch(n){e(n)}}function step(n){n.done?t(n.value):new i(function(l){l(n.value)}).then(fulfilled,rejected)}step((s=s.apply(n,l||[])).next())})},v=this&&this.__generator||function(n,l){function verb(e){return function(o){return function step(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(t=s[2&e[0]?"return":e[0]?"throw":"next"])&&!(t=t.call(s,e[1])).done)return t;switch(s=0,t&&(e=[0,t.value]),e[0]){case 0:case 1:t=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,s=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(t=u.trys,!(t=t.length>0&&t[t.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!t||e[1]>t[0]&&e[1]<t[3])){u.label=e[1];break}if(6===e[0]&&u.label<t[1]){u.label=t[1],t=e;break}if(t&&u.label<t[2]){u.label=t[2],u.ops.push(e);break}t[2]&&u.ops.pop(),u.trys.pop();continue}e=l.call(n,u)}catch(n){e=[6,n],s=0}finally{i=t=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var i,s,t,e,u={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return e={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},P=function(){function AddonModAssignSubmissionListPage(n,l,i,s,t,e,u,o,a){var r=this;this.sitesProvider=l,this.eventsProvider=i,this.domUtils=s,this.translate=t,this.assignProvider=e,this.assignOfflineProvider=u,this.assignHelper=o,this.groupsProvider=a,this.groupId=0,this.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},this.moduleId=n.get("moduleId"),this.courseId=n.get("courseId"),this.groupId=n.get("groupId"),this.selectedStatus=n.get("status"),this.title=this.translate.instant(this.selectedStatus?this.selectedStatus==g.a.NEED_GRADING?"addon.mod_assign.numberofsubmissionsneedgrading":"addon.mod_assign.submissionstatus_"+this.selectedStatus:"addon.mod_assign.numberofparticipants"),this.gradedObserver=i.on(g.a.GRADED_EVENT,function(n){r.loaded&&r.assign&&n.assignmentId==r.assign.id&&n.userId==l.getCurrentSiteUserId()&&(r.loaded=!1,r.refreshAllData(!0).finally(function(){r.loaded=!0}))},l.getCurrentSiteId());this.syncObserver=i.onMultiple([f.b.AUTO_SYNCED,f.b.MANUAL_SYNCED],function(n){r.loaded&&"submission-list"!=n.context&&(r.loaded=!1,r.refreshAllData(!1).finally(function(){r.loaded=!0}))},this.sitesProvider.getCurrentSiteId())}return AddonModAssignSubmissionListPage.prototype.ngOnInit=function(){var n=this;this.fetchAssignment(!0).finally(function(){!n.selectedSubmissionId&&n.splitviewCtrl.isOn()&&n.submissions.length>0&&n.loadSubmission(n.submissions[0]),n.loaded=!0})},AddonModAssignSubmissionListPage.prototype.fetchAssignment=function(n){return A(this,void 0,void 0,function(){var l,i,s,t,e;return v(this,function(u){switch(u.label){case 0:return u.trys.push([0,9,,10]),l=this,[4,this.assignProvider.getAssignment(this.courseId,this.moduleId)];case 1:if(l.assign=u.sent(),this.title=this.assign.name||this.title,!n)return[3,5];u.label=2;case 2:return u.trys.push([2,4,,5]),[4,f.a.instance.syncAssign(this.assign.id)];case 3:return(i=u.sent())&&i.updated&&this.eventsProvider.trigger(f.b.MANUAL_SYNCED,{assignId:this.assign.id,warnings:i.warnings,gradesBlocked:i.gradesBlocked,context:"submission-list"},this.sitesProvider.getCurrentSiteId()),[3,5];case 4:return u.sent(),[3,5];case 5:return s=this,[4,this.assignProvider.getSubmissions(this.assign.id,{cmId:this.assign.cmid})];case 6:if(s.submissionsData=u.sent(),!this.submissionsData.canviewsubmissions)throw new Error("Cannot view submissions.");return t=this,[4,this.groupsProvider.getActivityGroupInfo(this.assign.cmid,!1)];case 7:return t.groupInfo=u.sent(),[4,this.setGroup(this.groupsProvider.validateGroupId(this.groupId,this.groupInfo))];case 8:return u.sent(),[3,10];case 9:return e=u.sent(),this.domUtils.showErrorModalDefault(e,"Error getting assigment data."),[3,10];case 10:return[2]}})})},AddonModAssignSubmissionListPage.prototype.setGroup=function(n){var l=this;if(this.groupId=n,this.haveAllParticipants=!0,!this.sitesProvider.getCurrentSite().wsAvailable("mod_assign_list_participants"))return this.haveAllParticipants=!1,this.submissions=[],Promise.resolve();var i=[this.assignHelper.getSubmissionsUserData(this.assign,this.submissionsData.submissions,this.groupId),this.assign.markingworkflow?Promise.resolve(null):this.assignProvider.getAssignmentGrades(this.assign.id,{cmId:this.assign.cmid})];return Promise.all(i).then(function(n){var i=n[1],s=l.selectedStatus==g.a.NEED_GRADING,t=s?g.a.SUBMISSION_STATUS_SUBMITTED:l.selectedStatus,e=[],u=[];return n[0].forEach(function(n){t&&t!=n.status||e.push(l.assignOfflineProvider.getSubmissionGrade(l.assign.id,n.userid).catch(function(){}).then(function(t){var e=!1;return t&&n.timemodified<t.timemodified&&(e=!0),(s?l.assignProvider.needsSubmissionToBeGraded(n,l.assign.id):Promise.resolve(!0)).then(function(s){if(s){if("graded"==n.gradingstatus&&!l.assign.markingworkflow){var t=i.filter(function(l){return l.userid==n.userid}).reduce(function(n,l){return n.timemodified>l.timemodified?n:l});t&&t.timemodified<n.timemodified&&(n.gradingstatus=g.a.GRADED_FOLLOWUP_SUBMIT)}n.statusColor=l.assignProvider.getSubmissionStatusColor(n.status),n.gradingColor=l.assignProvider.getSubmissionGradingStatusColor(n.gradingstatus),n.statusTranslated="success"==n.statusColor&&n.gradingstatus?"":l.translate.instant("addon.mod_assign.submissionstatus_"+n.status),e?(n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor=""):n.gradingStatusTranslationId="danger"!=n.statusColor||"danger"!=n.gradingColor?l.assignProvider.getSubmissionGradingStatusTranslationId(n.gradingstatus):"",u.push(n)}})}))}),Promise.all(e).then(function(){l.submissions=u})})},AddonModAssignSubmissionListPage.prototype.loadSubmission=function(n){this.selectedSubmissionId===n.submitid&&this.splitviewCtrl.isOn()||(this.selectedSubmissionId=n.submitid,this.splitviewCtrl.push("AddonModAssignSubmissionReviewPage",{courseId:this.courseId,moduleId:this.moduleId,submitId:n.submitid,blindId:n.blindid}))},AddonModAssignSubmissionListPage.prototype.refreshAllData=function(n){var l=this,i=[];return i.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(i.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),i.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),i.push(this.assignProvider.invalidateAssignmentGradesData(this.assign.id)),i.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),Promise.all(i).finally(function(){return l.fetchAssignment(n)})},AddonModAssignSubmissionListPage.prototype.refreshList=function(n){this.refreshAllData(!0).finally(function(){n.complete()})},AddonModAssignSubmissionListPage.prototype.ngOnDestroy=function(){this.gradedObserver&&this.gradedObserver.off(),this.syncObserver&&this.syncObserver.off()},p([Object(s._10)(b.a),h("design:type",b.a)],AddonModAssignSubmissionListPage.prototype,"splitviewCtrl",void 0),AddonModAssignSubmissionListPage=p([Object(s.m)({selector:"page-addon-mod-assign-submission-list",templateUrl:"submission-list.html"}),h("design:paramtypes",[t.t,r.b,a.b,d.b,e.c,g.a,c.a,m.a,_.a])],AddonModAssignSubmissionListPage)}(),S=this&&this.__decorate||function(n,l,i,s){var t,e=arguments.length,u=e<3?l:null===s?s=Object.getOwnPropertyDescriptor(l,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,l,i,s);else for(var o=n.length-1;o>=0;o--)(t=n[o])&&(u=(e<3?t(u):e>3?t(l,i,u):t(l,i))||u);return e>3&&u&&Object.defineProperty(l,i,u),u},I=function(){function AddonModAssignSubmissionListPageModule(){}return AddonModAssignSubmissionListPageModule=S([Object(s.J)({declarations:[P],imports:[u.a,o.a,t.l.forChild(P),e.b.forChild()]})],AddonModAssignSubmissionListPageModule)}(),w=i(1551),M=i(1552),L=i(1553),y=i(1554),x=i(1555),C=i(1556),k=i(1557),V=i(1558),D=i(1559),O=i(1560),G=i(1561),j=i(1562),$=i(1563),T=i(126),E=i(118),R=i(25),U=i(18),W=i(69),N=i(8),B=i(113),F=i(31),H=i(22),Y=i(21),q=i(27),J=i(33),z=i(7),K=i(127),Q=i(114),X=i(35),Z=i(62),nn=i(23),ln=i(144),sn=i(218),tn=i(186),en=i(20),un=i(2),on=i(12),an=i(164),rn=i(48),dn=i(379),_n=i(41),gn=i(739),cn=i(216),fn=i(486),mn=i(740),bn=i(324),pn=i(252),hn=i(49),An=i(10),vn=i(16),Pn=i(19),Sn=i(6),In=i(17),wn=i(14),Mn=i(28),Ln=i(42),yn=i(43),xn=i(30),Cn=i(36),kn=i(40),Vn=i(380),Dn=i(487),On=i(70),Gn=i(185),jn=i(34),$n=i(112),Tn=i(163),En=i(45),Rn=i(217),Un=i(178),Wn=i(57),Nn=i(54),Bn=i(87),Fn=i(73),Hn=s._30({encapsulation:2,styles:[],data:{}}),Yn=s._28("page-addon-mod-assign-submission-list",P,function View_AddonModAssignSubmissionListPage_Host_0(n){return s._58(0,[(n()(),s._32(0,0,null,null,1,"page-addon-mod-assign-submission-list",[],null,null,null,View_AddonModAssignSubmissionListPage_0,Hn)),s._31(1,245760,null,0,P,[Fn.a,r.b,a.b,d.b,U.a,g.a,c.a,m.a,_.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),qn=i(375),Jn=i(376),zn=i(378),Kn=i(377),Qn=i(485),Xn=i(738),Zn=i(111),nl=i(277);i.d(l,"AddonModAssignSubmissionListPageModuleNgFactory",function(){return ll});var ll=s._29(I,[],function(n){return s._41([s._42(512,s.o,s._22,[[8,[w.a,M.a,L.a,y.a,x.a,C.a,k.a,V.a,D.a,O.a,G.a,j.a,$.a,Yn]],[3,s.o],s.L]),s._42(4608,z.m,z.l,[s.G,[2,z.w]]),s._42(4608,nn.x,nn.x,[]),s._42(4608,nn.d,nn.d,[]),s._42(4608,qn.b,qn.a,[]),s._42(4608,Jn.a,Jn.b,[]),s._42(4608,zn.b,zn.a,[]),s._42(4608,Kn.b,Kn.a,[]),s._42(4608,U.a,U.a,[Qn.a,qn.b,Jn.a,zn.b,Kn.b,U.b,U.c]),s._42(512,z.b,z.b,[]),s._42(512,nn.v,nn.v,[]),s._42(512,nn.i,nn.i,[]),s._42(512,nn.s,nn.s,[]),s._42(512,Xn.a,Xn.a,[]),s._42(512,e.b,e.b,[]),s._42(512,o.a,o.a,[]),s._42(512,Zn.a,Zn.a,[]),s._42(512,u.a,u.a,[]),s._42(512,Xn.b,Xn.b,[]),s._42(512,I,I,[]),s._42(256,U.c,void 0,[]),s._42(256,U.b,void 0,[]),s._42(256,nl.a,P,[])])})}});
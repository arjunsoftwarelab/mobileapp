webpackJsonp([42],{2138:function(e,n,l){"use strict";function View_CoreSettingsSpaceUsagePage_2(e){return t._58(0,[(e()(),t._32(0,0,null,null,2,"p",[["text-end",""]],null,null,null,null,null)),(e()(),t._56(1,null,["",""])),t._50(2,1)],null,function(e,n){e(n,1,0,t._57(n,1,0,e(n,2,0,t._45(n.parent.parent,0),n.parent.context.$implicit.spaceUsage)))})}function View_CoreSettingsSpaceUsagePage_1(e){return t._58(0,[(e()(),t._32(0,0,null,null,27,"ion-item",[["class","item item-block"]],[[2,"core-primary-selected-item",null]],null,null,W.b,W.a)),t._31(1,1097728,null,3,O.a,[V.a,$.a,t.t,t.W,[2,D.a]],null,null),t._53(335544320,3,{contentLabel:0}),t._53(603979776,4,{_buttons:1}),t._53(603979776,5,{_icons:1}),t._31(5,16384,null,0,N.a,[],null,null),(e()(),t._56(-1,2,["\n            "])),(e()(),t._32(7,0,null,2,2,"h2",[["text-wrap",""]],null,null,null,null,null)),(e()(),t._32(8,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),t._31(9,540672,null,0,M.a,[t.t,i.b,r.b,H.b,L.a,F.a,T.b,G.b,J.b,A.b,q.b,[2,z.a],[2,B.a],[2,K.a],Q.a,X.b,Y.a,Z.a,ee.a,t._12,ne.b],{text:[0,"text"],siteId:[1,"siteId"],clean:[2,"clean"]},null),(e()(),t._56(-1,2,["\n            "])),(e()(),t._32(11,0,null,2,1,"p",[["text-wrap",""]],null,null,null,null,null)),(e()(),t._56(12,null,["",""])),(e()(),t._56(-1,2,["\n            "])),(e()(),t._32(14,0,null,4,4,"div",[["item-end",""]],null,null,null,null,null)),(e()(),t._56(-1,null,["\n                "])),(e()(),t._27(16777216,null,null,1,null,View_CoreSettingsSpaceUsagePage_2)),t._31(17,16384,null,0,le.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,null,["\n            "])),(e()(),t._56(-1,2,["\n            "])),(e()(),t._32(20,0,null,4,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,l){var t=!0;if("click"===n){t=!1!==e.component.deleteSiteStorage(e.context.$implicit)&&t}return t},te.b,te.a)),t._31(21,1097728,[[4,4]],0,ae.a,[[8,""],$.a,t.t,t.W],{color:[0,"color"],clear:[1,"clear"]},null),t._48(131072,ue.a,[L.a,t.j]),(e()(),t._56(-1,0,["\n                "])),(e()(),t._32(24,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(25,147456,null,0,ie.a,[$.a,t.t,t.W],{name:[0,"name"]},null),(e()(),t._56(-1,0,["\n            "])),(e()(),t._56(-1,2,["\n        "]))],function(e,n){e(n,9,0,n.context.$implicit.siteName,n.context.$implicit.id,"true");e(n,17,0,null!=n.context.$implicit.spaceUsage);e(n,21,0,"danger","");e(n,25,0,"trash")},function(e,n){e(n,0,0,n.context.$implicit.id==n.component.currentSiteId);e(n,12,0,n.context.$implicit.fullName);e(n,20,0,!n.context.$implicit.spaceUsage>"0"&&!n.context.$implicit.cacheEntries>"0",t._57(n,20,1,t._45(n,22).transform("core.settings.deletesitefilestitle")));e(n,24,0,t._45(n,25)._hidden)})}function View_CoreSettingsSpaceUsagePage_3(e){return t._58(0,[(e()(),t._32(0,0,null,null,17,"ion-item-divider",[["class","item item-divider"]],null,null,null,W.b,W.a)),t._31(1,1097728,null,3,O.a,[V.a,$.a,t.t,t.W,[2,D.a]],null,null),t._53(335544320,6,{contentLabel:0}),t._53(603979776,7,{_buttons:1}),t._53(603979776,8,{_icons:1}),t._31(5,16384,null,0,re.a,[$.a,t.t,t.W],null,null),(e()(),t._56(-1,2,["\n            "])),(e()(),t._32(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),t._56(8,null,["",""])),t._48(131072,ue.a,[L.a,t.j]),(e()(),t._56(-1,2,["\n            "])),(e()(),t._32(11,0,null,4,5,"div",[["item-end",""]],null,null,null,null,null)),(e()(),t._56(-1,null,["\n                "])),(e()(),t._32(13,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),t._56(14,null,["",""])),t._50(15,1),(e()(),t._56(-1,null,["\n            "])),(e()(),t._56(-1,2,["\n        "]))],null,function(e,n){var l=n.component;e(n,8,0,t._57(n,8,0,t._45(n,9).transform("core.settings.total")));e(n,14,0,t._57(n,14,0,e(n,15,0,t._45(n.parent,0),l.totals.spaceUsage)))})}function View_CoreSettingsSpaceUsagePage_0(e){return t._58(0,[t._48(0,oe.a,[J.b,H.b]),(e()(),t._32(1,0,null,null,17,"ion-header",[],null,null,null,null,null)),t._31(2,16384,null,0,se.a,[$.a,t.t,t.W,[2,ce.a]],null,null),(e()(),t._56(-1,null,["\n    "])),(e()(),t._32(4,0,null,null,13,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,_e.b,_e.a)),t._31(5,49152,null,0,pe.a,[ge.a,[2,ce.a],[2,z.a],$.a,t.t,t.W],null,null),t._31(6,212992,null,0,fe.a,[pe.a,L.a,X.b],null,null),(e()(),t._56(-1,3,["\n        "])),(e()(),t._32(8,0,null,3,3,"ion-title",[],null,null,null,de.b,de.a)),t._31(9,49152,null,0,he.a,[$.a,t.t,t.W,[2,be.a],[2,pe.a]],null,null),(e()(),t._56(10,0,["",""])),t._48(131072,ue.a,[L.a,t.j]),(e()(),t._56(-1,3,["\n        "])),(e()(),t._32(13,0,null,2,3,"ion-buttons",[["end",""]],null,null,null,null,null)),t._31(14,16384,null,1,me.a,[$.a,t.t,t.W,[2,be.a],[2,pe.a]],null,null),t._53(603979776,1,{_buttons:1}),(e()(),t._56(-1,null,["\n        "])),(e()(),t._56(-1,3,["\n    "])),(e()(),t._56(-1,null,["\n"])),(e()(),t._56(-1,null,["\n"])),(e()(),t._32(20,0,null,null,11,"core-navbar-buttons",[],null,null,null,Se.b,Se.a)),t._31(21,245760,null,1,ve.a,[t.t,J.b,r.b],null,null),t._53(603979776,2,{buttons:1}),(e()(),t._56(-1,0,["\n    "])),(e()(),t._32(24,0,null,0,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,l){var t=!0;if("click"===n){t=!1!==e.component.showInfo()&&t}return t},te.b,te.a)),t._31(25,1097728,[[2,4]],0,ae.a,[[8,""],$.a,t.t,t.W],null,null),t._48(131072,ue.a,[L.a,t.j]),(e()(),t._56(-1,0,["\n        "])),(e()(),t._32(28,0,null,0,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._31(29,147456,null,0,ie.a,[$.a,t.t,t.W],{name:[0,"name"]},null),(e()(),t._56(-1,0,["\n    "])),(e()(),t._56(-1,0,["\n"])),(e()(),t._56(-1,null,["\n"])),(e()(),t._32(33,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Ue.b,Ue.a)),t._31(34,4374528,null,0,B.a,[$.a,F.a,ye.a,t.t,t.W,ge.a,Pe.a,t.N,[2,ce.a],[2,z.a]],null,null),(e()(),t._56(-1,1,["\n    "])),(e()(),t._32(36,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,l){var t=!0;if("ionRefresh"===n){t=!1!==e.component.refreshData(l)&&t}return t},null,null)),t._31(37,212992,null,0,we.a,[F.a,B.a,t.N,xe.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),t._56(-1,null,["\n        "])),(e()(),t._32(39,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ce.b,Ce.a)),t._31(40,114688,null,0,je.a,[we.a,$.a],{pullingText:[0,"pullingText"]},null),t._48(131072,ue.a,[L.a,t.j]),(e()(),t._56(-1,null,["\n    "])),(e()(),t._56(-1,1,["\n    "])),(e()(),t._32(44,0,null,1,8,"core-loading",[],null,null,null,Ie.b,Ie.a)),t._31(45,638976,null,0,Re.a,[L.a,t.t,X.b,T.b],{hideUntil:[0,"hideUntil"]},null),(e()(),t._56(-1,0,["\n        "])),(e()(),t._27(16777216,null,0,1,null,View_CoreSettingsSpaceUsagePage_1)),t._31(48,802816,null,0,le.j,[t._12,t._7,t.E],{ngForOf:[0,"ngForOf"]},null),(e()(),t._56(-1,0,["\n        "])),(e()(),t._27(16777216,null,0,1,null,View_CoreSettingsSpaceUsagePage_3)),t._31(51,16384,null,0,le.k,[t._12,t._7],{ngIf:[0,"ngIf"]},null),(e()(),t._56(-1,0,["\n    "])),(e()(),t._56(-1,1,["\n"])),(e()(),t._56(-1,null,["\n"]))],function(e,n){var l=n.component;e(n,6,0),e(n,21,0);e(n,29,0,"information-circle");e(n,37,0,l.loaded);e(n,40,0,t._35(1,"",t._57(n,40,0,t._45(n,41).transform("core.pulltorefresh")),""));e(n,45,0,l.loaded);e(n,48,0,l.sites);e(n,51,0,l.totals)},function(e,n){e(n,4,0,t._45(n,5)._hidden,t._45(n,5)._sbPadding);e(n,10,0,t._57(n,10,0,t._45(n,11).transform("core.settings.spaceusage")));e(n,24,0,t._57(n,24,0,t._45(n,26).transform("core.info")));e(n,28,0,t._45(n,29)._hidden);e(n,33,0,t._45(n,34).statusbarPadding,t._45(n,34)._hasRefresher);e(n,36,0,"inactive"!==t._45(n,37).state,t._45(n,37)._top);e(n,39,0,t._45(n,40).r.state)})}Object.defineProperty(n,"__esModule",{value:!0});var t=l(0),a=l(5),u=l(3),i=l(1),r=l(4),o=l(745),s=this&&this.__decorate||function(e,n,l,t){var a,u=arguments.length,i=u<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,l):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,l,t);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(i=(u<3?a(i):u>3?a(n,l,i):a(n,l))||i);return u>3&&i&&Object.defineProperty(n,l,i),i},c=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},_=this&&this.__awaiter||function(e,n,l,t){return new(l||(l=Promise))(function(a,u){function fulfilled(e){try{step(t.next(e))}catch(e){u(e)}}function rejected(e){try{step(t.throw(e))}catch(e){u(e)}}function step(e){e.done?a(e.value):new l(function(n){n(e.value)}).then(fulfilled,rejected)}step((t=t.apply(e,n||[])).next())})},p=this&&this.__generator||function(e,n){function verb(u){return function(r){return function step(u){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,t&&(a=t[2&u[0]?"return":u[0]?"throw":"next"])&&!(a=a.call(t,u[1])).done)return a;switch(t=0,a&&(u=[0,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,t=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){i.label=u[1];break}if(6===u[0]&&i.label<a[1]){i.label=a[1],a=u;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(u);break}a[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],t=0}finally{l=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,r])}}var l,t,a,u,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},g=function(){function CoreSettingsSpaceUsagePage(e,n,l,t){this.sitesProvider=e,this.settingsHelper=n,this.domUtils=l,this.translate=t,this.loaded=!1,this.sites=[],this.currentSiteId="",this.totals={cacheEntries:0,spaceUsage:0},this.currentSiteId=this.sitesProvider.getCurrentSiteId()}return CoreSettingsSpaceUsagePage.prototype.ionViewDidLoad=function(){var e=this;this.loadSiteData().finally(function(){e.loaded=!0})},CoreSettingsSpaceUsagePage.prototype.loadSiteData=function(){return _(this,void 0,void 0,function(){var e,n,l,t=this;return p(this,function(a){switch(a.label){case 0:return e=0,n=0,l=this,[4,this.sitesProvider.getSortedSites()];case 1:return l.sites=a.sent(),[4,Promise.all(this.sites.map(function(l){return _(t,void 0,void 0,function(){var t;return p(this,function(a){switch(a.label){case 0:return[4,this.settingsHelper.getSiteSpaceUsage(l.id)];case 1:return t=a.sent(),l.cacheEntries=t.cacheEntries,l.spaceUsage=t.spaceUsage,e+=l.spaceUsage?parseInt(l.spaceUsage,10):0,n+=l.cacheEntries?parseInt(l.cacheEntries,10):0,[2]}})})}))];case 2:return a.sent(),this.totals.spaceUsage=e,this.totals.cacheEntries=n,[2]}})})},CoreSettingsSpaceUsagePage.prototype.refreshData=function(e){this.loadSiteData().finally(function(){e.complete()})},CoreSettingsSpaceUsagePage.prototype.deleteSiteStorage=function(e){var n=this;this.settingsHelper.deleteSiteStorage(e.siteName,e.id).then(function(l){n.totals.spaceUsage-=e.spaceUsage-l.spaceUsage,n.totals.spaceUsage-=e.cacheEntries-l.cacheEntries,e.spaceUsage=l.spaceUsage,e.cacheEntries=l.cacheEntries}).catch(function(){})},CoreSettingsSpaceUsagePage.prototype.showInfo=function(){this.domUtils.showAlert(this.translate.instant("core.help"),this.translate.instant("core.settings.spaceusagehelp"))},CoreSettingsSpaceUsagePage=s([Object(t.m)({selector:"page-core-settings-space-usage",templateUrl:"space-usage.html"}),c("design:paramtypes",[i.b,o.a,r.b,u.c])],CoreSettingsSpaceUsagePage)}(),f=l(26),d=l(32),h=l(111),b=this&&this.__decorate||function(e,n,l,t){var a,u=arguments.length,i=u<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,l):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,l,t);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(i=(u<3?a(i):u>3?a(n,l,i):a(n,l))||i);return u>3&&i&&Object.defineProperty(n,l,i),i},m=function(){function CoreSettingsSpaceUsagePageModule(){}return CoreSettingsSpaceUsagePageModule=b([Object(t.J)({declarations:[g],imports:[f.a,d.a,h.a,a.l.forChild(g),u.b.forChild()]})],CoreSettingsSpaceUsagePageModule)}(),S=l(1551),v=l(1552),U=l(1553),y=l(1554),P=l(1555),w=l(1556),x=l(1557),C=l(1558),j=l(1559),I=l(1560),R=l(1561),k=l(1562),E=l(1563),W=l(31),O=l(22),V=l(21),$=l(8),D=l(27),N=l(33),M=l(49),H=l(10),L=l(18),F=l(16),T=l(2),G=l(19),J=l(6),A=l(17),q=l(14),z=l(20),B=l(28),K=l(29),Q=l(42),X=l(9),Y=l(43),Z=l(30),ee=l(36),ne=l(40),le=l(7),te=l(47),ae=l(44),ue=l(25),ie=l(48),re=l(103),oe=l(1584),se=l(379),ce=l(41),_e=l(739),pe=l(216),ge=l(35),fe=l(486),de=l(740),he=l(324),be=l(252),me=l(380),Se=l(96),ve=l(88),Ue=l(185),ye=l(34),Pe=l(112),we=l(163),xe=l(45),Ce=l(217),je=l(178),Ie=l(57),Re=l(54),ke=t._30({encapsulation:2,styles:[],data:{}}),Ee=t._28("page-core-settings-space-usage",g,function View_CoreSettingsSpaceUsagePage_Host_0(e){return t._58(0,[(e()(),t._32(0,0,null,null,1,"page-core-settings-space-usage",[],null,null,null,View_CoreSettingsSpaceUsagePage_0,ke)),t._31(1,49152,null,0,g,[i.b,o.a,r.b,L.a],null,null)],null,null)},{},{},[]),We=l(23),Oe=l(375),Ve=l(376),$e=l(378),De=l(377),Ne=l(485),Me=l(738),He=l(277);l.d(n,"CoreSettingsSpaceUsagePageModuleNgFactory",function(){return Le});var Le=t._29(m,[],function(e){return t._41([t._42(512,t.o,t._22,[[8,[S.a,v.a,U.a,y.a,P.a,w.a,x.a,C.a,j.a,I.a,R.a,k.a,E.a,Ee]],[3,t.o],t.L]),t._42(4608,le.m,le.l,[t.G,[2,le.w]]),t._42(4608,We.x,We.x,[]),t._42(4608,We.d,We.d,[]),t._42(4608,Oe.b,Oe.a,[]),t._42(4608,Ve.a,Ve.b,[]),t._42(4608,$e.b,$e.a,[]),t._42(4608,De.b,De.a,[]),t._42(4608,L.a,L.a,[Ne.a,Oe.b,Ve.a,$e.b,De.b,L.b,L.c]),t._42(512,le.b,le.b,[]),t._42(512,We.v,We.v,[]),t._42(512,We.i,We.i,[]),t._42(512,We.s,We.s,[]),t._42(512,Me.a,Me.a,[]),t._42(512,u.b,u.b,[]),t._42(512,d.a,d.a,[]),t._42(512,h.a,h.a,[]),t._42(512,f.a,f.a,[]),t._42(512,Me.b,Me.b,[]),t._42(512,m,m,[]),t._42(256,L.c,void 0,[]),t._42(256,L.b,void 0,[]),t._42(256,He.a,g,[])])})}});